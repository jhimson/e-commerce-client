{"ast":null,"code":"import _slicedToArray from\"D:\\\\Development\\\\A-portfolio-projects\\\\e-commerce-practice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";/* eslint-disable no-nested-ternary */import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Row,Col}from'react-bootstrap';import{Link,useParams}from'react-router-dom';import Product from'../Product';import{listProducts,resetProductDetails,fetchTopProducts}from'../../actions/productActions';import Loader from'../Loader';import Message from'../Message';import{getOrdersByUserId}from'../../actions/orderActions';import{resetReviews,resetCreateReview}from'../../actions/reviewActions';import Paginator from'../Paginator';import ProductsCarousel from'../ProductsCarousel';import Meta from'../Meta';var HomeScreen=function HomeScreen(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(5),_useState4=_slicedToArray(_useState3,2),productsPerPage=_useState4[0],setProductsPerPage=_useState4[1];var dispatch=useDispatch();var _useParams=useParams(),keyword=_useParams.keyword;var _useSelector=useSelector(function(state){return state.productList;}),loading=_useSelector.loading,error=_useSelector.error,products=_useSelector.products;var userInfo=useSelector(function(state){return state.userLogin.userInfo;});var topProducts=useSelector(function(state){return state.topProductFetch;});var topThreeProducts=topProducts.products;var filteredProducts=products.filter(function(product){return product.name.toLowerCase().indexOf(keyword)!==-1;});useEffect(function(){dispatch(fetchTopProducts());dispatch(resetCreateReview());dispatch(resetReviews());dispatch(resetProductDetails());dispatch(listProducts());if(userInfo){dispatch(getOrdersByUserId(userInfo.user_id));}},[dispatch,userInfo,keyword]);// Get current products\nvar indexOfLastProduct=currentPage*productsPerPage;var indexOfFirstProduct=indexOfLastProduct-productsPerPage;var currentProducts=products.slice(indexOfFirstProduct,indexOfLastProduct);var numberOfPages=Math.ceil(products.length/productsPerPage);// Change page\nvar paginate=function paginate(pageNumber){return setCurrentPage(pageNumber);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Meta,null),topThreeProducts&&!keyword?/*#__PURE__*/React.createElement(ProductsCarousel,{products:topThreeProducts}):/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"btn btn-dark\"},\"Go Back\"),!keyword&&/*#__PURE__*/React.createElement(\"h1\",null,\"Featured Products\"),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error):products.length===0?/*#__PURE__*/React.createElement(Message,null,\"No Products found!\"):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,filteredProducts.length!==0?filteredProducts.map(function(product){return/*#__PURE__*/React.createElement(Col,{key:product.product_id,sm:12,md:6,lg:4,xl:3},/*#__PURE__*/React.createElement(Product,{product:product}));}):currentProducts.map(function(product){return/*#__PURE__*/React.createElement(Col,{key:product.product_id,sm:12,md:6,lg:4,xl:3},/*#__PURE__*/React.createElement(Product,{product:product}));})),/*#__PURE__*/React.createElement(Row,null,numberOfPages>1?/*#__PURE__*/React.createElement(Paginator,{productsPerPage:productsPerPage,totalProducts:products.length,paginate:paginate}):null)));};export default HomeScreen;","map":{"version":3,"sources":["D:/Development/A-portfolio-projects/e-commerce-practice/frontend/src/components/screens/HomeScreen.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","Row","Col","Link","useParams","Product","listProducts","resetProductDetails","fetchTopProducts","Loader","Message","getOrdersByUserId","resetReviews","resetCreateReview","Paginator","ProductsCarousel","Meta","HomeScreen","currentPage","setCurrentPage","productsPerPage","setProductsPerPage","dispatch","keyword","state","productList","loading","error","products","userInfo","userLogin","topProducts","topProductFetch","topThreeProducts","filteredProducts","filter","product","name","toLowerCase","indexOf","user_id","indexOfLastProduct","indexOfFirstProduct","currentProducts","slice","numberOfPages","Math","ceil","length","paginate","pageNumber","map","product_id"],"mappings":"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","sourcesContent":["/* eslint-disable no-nested-ternary */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport Product from '../Product';\r\nimport {\r\n  listProducts,\r\n  resetProductDetails,\r\n  fetchTopProducts,\r\n} from '../../actions/productActions';\r\nimport Loader from '../Loader';\r\nimport Message from '../Message';\r\nimport { getOrdersByUserId } from '../../actions/orderActions';\r\nimport { resetReviews, resetCreateReview } from '../../actions/reviewActions';\r\nimport Paginator from '../Paginator';\r\nimport ProductsCarousel from '../ProductsCarousel';\r\nimport Meta from '../Meta';\r\n\r\nconst HomeScreen = () => {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [productsPerPage, setProductsPerPage] = useState(5);\r\n  const dispatch = useDispatch();\r\n  const { keyword } = useParams();\r\n\r\n  const { loading, error, products } = useSelector(\r\n    (state) => state.productList\r\n  );\r\n\r\n  const userInfo = useSelector((state) => state.userLogin.userInfo);\r\n\r\n  const topProducts = useSelector((state) => state.topProductFetch);\r\n  const { products: topThreeProducts } = topProducts;\r\n\r\n  const filteredProducts = products.filter(\r\n    (product) => product.name.toLowerCase().indexOf(keyword) !== -1\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchTopProducts());\r\n    dispatch(resetCreateReview());\r\n    dispatch(resetReviews());\r\n    dispatch(resetProductDetails());\r\n    dispatch(listProducts());\r\n    if (userInfo) {\r\n      dispatch(getOrdersByUserId(userInfo.user_id));\r\n    }\r\n  }, [dispatch, userInfo, keyword]);\r\n\r\n  // Get current products\r\n  const indexOfLastProduct = currentPage * productsPerPage;\r\n  const indexOfFirstProduct = indexOfLastProduct - productsPerPage;\r\n  const currentProducts = products.slice(\r\n    indexOfFirstProduct,\r\n    indexOfLastProduct\r\n  );\r\n\r\n  const numberOfPages = Math.ceil(products.length / productsPerPage);\r\n  // Change page\r\n  const paginate = (pageNumber) => setCurrentPage(pageNumber);\r\n\r\n  return (\r\n    <>\r\n      <Meta />\r\n      {topThreeProducts && !keyword ? (\r\n        <ProductsCarousel products={topThreeProducts} />\r\n      ) : (\r\n        <Link to=\"/\" className=\"btn btn-dark\">\r\n          Go Back\r\n        </Link>\r\n      )}\r\n      {!keyword && <h1>Featured Products</h1>}\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant=\"danger\">{error}</Message>\r\n      ) : products.length === 0 ? (\r\n        <Message>No Products found!</Message>\r\n      ) : (\r\n        <>\r\n          <Row>\r\n            {filteredProducts.length !== 0\r\n              ? filteredProducts.map((product) => (\r\n                  <Col key={product.product_id} sm={12} md={6} lg={4} xl={3}>\r\n                    <Product product={product} />\r\n                  </Col>\r\n                ))\r\n              : currentProducts.map((product) => (\r\n                  <Col key={product.product_id} sm={12} md={6} lg={4} xl={3}>\r\n                    <Product product={product} />\r\n                  </Col>\r\n                ))}\r\n          </Row>\r\n          <Row>\r\n            {numberOfPages > 1 ? (\r\n              <Paginator\r\n                productsPerPage={productsPerPage}\r\n                totalProducts={products.length}\r\n                paginate={paginate}\r\n              />\r\n            ) : null}\r\n          </Row>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomeScreen;\r\n"]},"metadata":{},"sourceType":"module"}