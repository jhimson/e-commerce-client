{"ast":null,"code":"var _jsxFileName = \"D:\\\\Development\\\\portfolio-projects\\\\e-commerce-practice\\\\frontend\\\\src\\\\components\\\\screens\\\\OrderScreen.jsx\";\n\n/* eslint-disable no-nested-ternary */\n\n/* eslint-disable camelcase */\nimport React, { useEffect, useState } from 'react';\nimport Axios from 'axios';\nimport Moment from 'moment';\nimport { PayPalButton } from 'react-paypal-button-v2';\nimport { Link, useHistory, useLocation, useParams } from 'react-router-dom';\nimport { Row, Col, ListGroup, Image, Card, Button } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { FaDollarSign } from 'react-icons/fa';\nimport Message from '../Message';\nimport Loader from '../Loader';\nimport { payOrder, getAllOrderedItemsByOrderId, deliverOrder, resetDeliverOrder } from '../../actions/orderActions';\nimport { getUserDetails } from '../../actions/userActions';\nimport { resetProductDetails } from '../../actions/productActions';\nimport { orderConstants } from '../../constants/orderConstants';\n\nconst OrderScreen = () => {\n  const {\n    ORDER_PAY_RESET\n  } = orderConstants;\n  const [sdkReady, setSdkReady] = useState(false);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const {\n    id\n  } = useParams();\n  const user = useSelector(state => state.userDetails.user);\n  const {\n    firstname,\n    lastname\n  } = user;\n  const {\n    userInfo\n  } = useSelector(state => state.userLogin);\n  const {\n    user_id,\n    email,\n    isAdmin\n  } = userInfo;\n  const {\n    orders,\n    shippingDetails,\n    loading,\n    error\n  } = useSelector(state => state.orderedItems);\n  const {\n    loading: loadingPay,\n    success: successPay\n  } = useSelector(state => state.orderPay);\n  const {\n    loading: loadingDeliver,\n    success: successDeliver,\n    error: errorDeliver\n  } = useSelector(state => state.orderDeliver); // TODO - CALCULATIONS FOR PRICE\n\n  const addDecimals = num => (Math.round(num * 100) / 100).toFixed(2);\n\n  const subTotalPrice = addDecimals(orders.reduce((accu, item) => accu + parseInt(item.price) * item.quantity, 0));\n  const shippingPrice = addDecimals(subTotalPrice > 100 ? 0 : 100);\n  const taxPrice = addDecimals(Number((0.15 * subTotalPrice).toFixed(2)));\n  const totalPrice = (Number(subTotalPrice) + Number(shippingPrice) + Number(taxPrice)).toFixed(2);\n  useEffect(() => {\n    if (!email) {\n      history.push('/login');\n    }\n\n    dispatch(resetProductDetails());\n\n    const addPayPalScript = async () => {\n      const {\n        data: clientID\n      } = await Axios.get('http://localhost:5000/api/v1/config/paypal');\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.async = true;\n      script.src = `https://www.paypal.com/sdk/js?client-id=${clientID}`;\n\n      script.onload = () => {\n        setSdkReady(true);\n      };\n\n      document.body.appendChild(script);\n    };\n\n    if (orders.length === 0 || successPay || successDeliver) {\n      dispatch({\n        type: ORDER_PAY_RESET\n      });\n      dispatch(resetDeliverOrder());\n      dispatch(getAllOrderedItemsByOrderId(id));\n    } else if (!shippingDetails.is_paid) {\n      if (!window.paypal) {\n        addPayPalScript();\n      } else {\n        setSdkReady(true);\n      }\n    }\n  }, [dispatch, id, orders, shippingDetails.is_paid, successPay, successDeliver, ORDER_PAY_RESET, email, history, user_id]);\n\n  const successPaymentHandler = paymentResult => {\n    dispatch(payOrder(shippingDetails.order_id, paymentResult));\n    localStorage.removeItem('orderDetailsList');\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, loadingDeliver && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 26\n    }\n  }), errorDeliver && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 24\n    }\n  }, errorDeliver), error ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, `${error}`) : loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Message, {\n    variant: \"info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, \"ORDER \", id)), /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 19\n    }\n  }, \"Name:\"), firstname, \", \", lastname), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: `mailto:${shippingDetails.payment_email_address}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, \"shippingDetails.payment_email_address\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }, \"Address:\"), shippingDetails.address, \",\", shippingDetails.city, ' ', shippingDetails.postalCode, \" \", shippingDetails.country), shippingDetails.is_delivered ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  }, `Delivered on ${Moment(shippingDetails.delivered_at).format('MMMM Do YYYY, h:mm:ss A')} - (${Moment().startOf('hour').fromNow()})`) : /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }, \"Not Delivered\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, \"Payment Method\"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, \"Method:\"), shippingDetails.payment_method, shippingDetails.is_paid ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }, `Paid on ${Moment(shippingDetails.paid_at).format('MMMM Do YYYY, h:mm:ss A')} - (${Moment().startOf('hour').fromNow()})`) : /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 19\n    }\n  }, \"Not Paid\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, \"Order List\"), orders.length === 0 ? /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 19\n    }\n  }, \"No items found!\") : /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 19\n    }\n  }, orders.map(item => /*#__PURE__*/React.createElement(ListGroup.Item, {\n    key: item.product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: item.image,\n    alt: item.name,\n    fluid: true,\n    rounded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item.product_id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 29\n    }\n  }, `${item.name} - ${item.product_id}`)), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 27\n    }\n  }, item.quantity, \" x \", /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 47\n    }\n  }), item.price, \" = \", /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 44\n    }\n  }), item.quantity * item.price)))))))), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 19\n    }\n  }, \"Order Summary\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 21\n    }\n  }, \"Subtotal\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 23\n    }\n  }), subTotalPrice))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 21\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 23\n    }\n  }), shippingPrice))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 21\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 23\n    }\n  }), taxPrice))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 21\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 23\n    }\n  }), totalPrice))), !shippingDetails.is_paid && /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 19\n    }\n  }, loadingPay && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 36\n    }\n  }), !sdkReady ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 23\n    }\n  }) : /*#__PURE__*/React.createElement(PayPalButton, {\n    amount: totalPrice,\n    onSuccess: successPaymentHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 23\n    }\n  })), userInfo && isAdmin && shippingDetails.is_paid && !shippingDetails.is_delivered ? /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn btn-block\",\n    onClick: () => dispatch(deliverOrder(id)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 21\n    }\n  }, \"Mark as Delivered\")) : null)))));\n};\n\nexport default OrderScreen;","map":{"version":3,"sources":["D:/Development/portfolio-projects/e-commerce-practice/frontend/src/components/screens/OrderScreen.jsx"],"names":["React","useEffect","useState","Axios","Moment","PayPalButton","Link","useHistory","useLocation","useParams","Row","Col","ListGroup","Image","Card","Button","useDispatch","useSelector","FaDollarSign","Message","Loader","payOrder","getAllOrderedItemsByOrderId","deliverOrder","resetDeliverOrder","getUserDetails","resetProductDetails","orderConstants","OrderScreen","ORDER_PAY_RESET","sdkReady","setSdkReady","history","dispatch","location","id","user","state","userDetails","firstname","lastname","userInfo","userLogin","user_id","email","isAdmin","orders","shippingDetails","loading","error","orderedItems","loadingPay","success","successPay","orderPay","loadingDeliver","successDeliver","errorDeliver","orderDeliver","addDecimals","num","Math","round","toFixed","subTotalPrice","reduce","accu","item","parseInt","price","quantity","shippingPrice","taxPrice","Number","totalPrice","push","addPayPalScript","data","clientID","get","script","document","createElement","type","async","src","onload","body","appendChild","length","is_paid","window","paypal","successPaymentHandler","paymentResult","order_id","localStorage","removeItem","payment_email_address","address","city","postalCode","country","is_delivered","delivered_at","format","startOf","fromNow","payment_method","paid_at","map","product","image","name","product_id"],"mappings":"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","sourcesContent":["/* eslint-disable no-nested-ternary */\r\n/* eslint-disable camelcase */\r\nimport React, { useEffect, useState } from 'react';\r\nimport Axios from 'axios';\r\nimport Moment from 'moment';\r\nimport { PayPalButton } from 'react-paypal-button-v2';\r\nimport { Link, useHistory, useLocation, useParams } from 'react-router-dom';\r\nimport { Row, Col, ListGroup, Image, Card, Button } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { FaDollarSign } from 'react-icons/fa';\r\nimport Message from '../Message';\r\nimport Loader from '../Loader';\r\nimport {\r\n  payOrder,\r\n  getAllOrderedItemsByOrderId,\r\n  deliverOrder,\r\n  resetDeliverOrder,\r\n} from '../../actions/orderActions';\r\n\r\nimport { getUserDetails } from '../../actions/userActions';\r\nimport { resetProductDetails } from '../../actions/productActions';\r\nimport { orderConstants } from '../../constants/orderConstants';\r\n\r\nconst OrderScreen = () => {\r\n  const { ORDER_PAY_RESET } = orderConstants;\r\n  const [sdkReady, setSdkReady] = useState(false);\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const { id } = useParams();\r\n\r\n  const user = useSelector((state) => state.userDetails.user);\r\n  const { firstname, lastname } = user;\r\n\r\n  const { userInfo } = useSelector((state) => state.userLogin);\r\n  const { user_id, email, isAdmin } = userInfo;\r\n\r\n  const { orders, shippingDetails, loading, error } = useSelector(\r\n    (state) => state.orderedItems\r\n  );\r\n\r\n  const { loading: loadingPay, success: successPay } = useSelector(\r\n    (state) => state.orderPay\r\n  );\r\n\r\n  const {\r\n    loading: loadingDeliver,\r\n    success: successDeliver,\r\n    error: errorDeliver,\r\n  } = useSelector((state) => state.orderDeliver);\r\n\r\n  // TODO - CALCULATIONS FOR PRICE\r\n\r\n  const addDecimals = (num) => (Math.round(num * 100) / 100).toFixed(2);\r\n\r\n  const subTotalPrice = addDecimals(\r\n    orders.reduce(\r\n      (accu, item) => accu + parseInt(item.price) * item.quantity,\r\n      0\r\n    )\r\n  );\r\n  const shippingPrice = addDecimals(subTotalPrice > 100 ? 0 : 100);\r\n  const taxPrice = addDecimals(Number((0.15 * subTotalPrice).toFixed(2)));\r\n\r\n  const totalPrice = (\r\n    Number(subTotalPrice) +\r\n    Number(shippingPrice) +\r\n    Number(taxPrice)\r\n  ).toFixed(2);\r\n\r\n  useEffect(() => {\r\n    if (!email) {\r\n      history.push('/login');\r\n    }\r\n    dispatch(resetProductDetails());\r\n    const addPayPalScript = async () => {\r\n      const { data: clientID } = await Axios.get(\r\n        'http://localhost:5000/api/v1/config/paypal'\r\n      );\r\n      const script = document.createElement('script');\r\n      script.type = 'text/javascript';\r\n      script.async = true;\r\n      script.src = `https://www.paypal.com/sdk/js?client-id=${clientID}`;\r\n      script.onload = () => {\r\n        setSdkReady(true);\r\n      };\r\n      document.body.appendChild(script);\r\n    };\r\n\r\n    if (orders.length === 0 || successPay || successDeliver) {\r\n      dispatch({ type: ORDER_PAY_RESET });\r\n      dispatch(resetDeliverOrder());\r\n      dispatch(getAllOrderedItemsByOrderId(id));\r\n    } else if (!shippingDetails.is_paid) {\r\n      if (!window.paypal) {\r\n        addPayPalScript();\r\n      } else {\r\n        setSdkReady(true);\r\n      }\r\n    }\r\n  }, [\r\n    dispatch,\r\n    id,\r\n    orders,\r\n    shippingDetails.is_paid,\r\n    successPay,\r\n    successDeliver,\r\n    ORDER_PAY_RESET,\r\n    email,\r\n    history,\r\n    user_id,\r\n  ]);\r\n\r\n  const successPaymentHandler = (paymentResult) => {\r\n    dispatch(payOrder(shippingDetails.order_id, paymentResult));\r\n    localStorage.removeItem('orderDetailsList');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loadingDeliver && <Loader />}\r\n      {errorDeliver && <Message variant=\"danger\">{errorDeliver}</Message>}\r\n      {error ? (\r\n        <Message variant=\"danger\">{`${error}`}</Message>\r\n      ) : loading ? (\r\n        <Loader />\r\n      ) : (\r\n        <Row>\r\n          <Col md={8}>\r\n            <Message variant=\"info\">\r\n              <h5>ORDER {id}</h5>\r\n            </Message>\r\n            <ListGroup variant=\"flush\">\r\n              <ListGroup.Item>\r\n                <h2>Shipping</h2>\r\n                <p>\r\n                  <strong>Name:</strong>\r\n                  {firstname}, {lastname}\r\n                </p>\r\n                <p>\r\n                  <strong>Email:</strong>\r\n                  <a href={`mailto:${shippingDetails.payment_email_address}`}>\r\n                    shippingDetails.payment_email_address\r\n                  </a>\r\n                </p>\r\n                <p>\r\n                  <strong>Address:</strong>\r\n                  {shippingDetails.address},{shippingDetails.city}{' '}\r\n                  {shippingDetails.postalCode} {shippingDetails.country}\r\n                </p>\r\n                {shippingDetails.is_delivered ? (\r\n                  <Message variant=\"success\">{`Delivered on ${Moment(\r\n                    shippingDetails.delivered_at\r\n                  ).format('MMMM Do YYYY, h:mm:ss A')} - (${Moment()\r\n                    .startOf('hour')\r\n                    .fromNow()})`}</Message>\r\n                ) : (\r\n                  <Message variant=\"danger\">Not Delivered</Message>\r\n                )}\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <h2>Payment Method</h2>\r\n                <strong>Method:</strong>\r\n                {shippingDetails.payment_method}\r\n                {shippingDetails.is_paid ? (\r\n                  <Message variant=\"success\">\r\n                    {`Paid on ${Moment(shippingDetails.paid_at).format(\r\n                      'MMMM Do YYYY, h:mm:ss A'\r\n                    )} - (${Moment().startOf('hour').fromNow()})`}\r\n                  </Message>\r\n                ) : (\r\n                  <Message variant=\"danger\">Not Paid</Message>\r\n                )}\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <h2>Order List</h2>\r\n\r\n                {orders.length === 0 ? (\r\n                  <Message>No items found!</Message>\r\n                ) : (\r\n                  <ListGroup variant=\"flush\">\r\n                    {orders.map((item) => (\r\n                      <ListGroup.Item key={item.product}>\r\n                        <Row>\r\n                          <Col md={1}>\r\n                            <Image\r\n                              src={item.image}\r\n                              alt={item.name}\r\n                              fluid\r\n                              rounded\r\n                            />\r\n                          </Col>\r\n                          <Col>\r\n                            <Link to={`/product/${item.product_id}`}>\r\n                              {`${item.name} - ${item.product_id}`}\r\n                            </Link>\r\n                          </Col>\r\n                          <Col md={4}>\r\n                            {item.quantity} x <FaDollarSign />\r\n                            {item.price} = <FaDollarSign />\r\n                            {item.quantity * item.price}\r\n                          </Col>\r\n                        </Row>\r\n                      </ListGroup.Item>\r\n                    ))}\r\n                  </ListGroup>\r\n                )}\r\n              </ListGroup.Item>\r\n            </ListGroup>\r\n          </Col>\r\n          <Col md={4}>\r\n            <Card>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h2>Order Summary</h2>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <Row>\r\n                    <Col>Subtotal</Col>\r\n                    <Col>\r\n                      <FaDollarSign />\r\n                      {subTotalPrice}\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <Row>\r\n                    <Col>Shipping</Col>\r\n                    <Col>\r\n                      <FaDollarSign />\r\n                      {shippingPrice}\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <Row>\r\n                    <Col>Tax</Col>\r\n                    <Col>\r\n                      <FaDollarSign />\r\n                      {taxPrice}\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <Row>\r\n                    <Col>Total</Col>\r\n                    <Col>\r\n                      <FaDollarSign />\r\n                      {totalPrice}\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n                {!shippingDetails.is_paid && (\r\n                  <ListGroup.Item>\r\n                    {loadingPay && <Loader />}\r\n                    {!sdkReady ? (\r\n                      <Loader />\r\n                    ) : (\r\n                      <PayPalButton\r\n                        amount={totalPrice}\r\n                        onSuccess={successPaymentHandler}\r\n                      />\r\n                    )}\r\n                  </ListGroup.Item>\r\n                )}\r\n                {userInfo &&\r\n                isAdmin &&\r\n                shippingDetails.is_paid &&\r\n                !shippingDetails.is_delivered ? (\r\n                  <ListGroup.Item>\r\n                    <Button\r\n                      className=\"btn btn-block\"\r\n                      onClick={() => dispatch(deliverOrder(id))}\r\n                    >\r\n                      Mark as Delivered\r\n                    </Button>\r\n                  </ListGroup.Item>\r\n                ) : null}\r\n              </ListGroup>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderScreen;\r\n"]},"metadata":{},"sourceType":"module"}