{"ast":null,"code":"var _jsxFileName = \"D:\\\\Development\\\\portfolio-projects\\\\e-commerce-practice\\\\frontend\\\\src\\\\components\\\\screens\\\\ProductScreen.jsx\";\n\n/* eslint-disable no-nested-ternary */\nimport React, { useState, useEffect } from 'react';\nimport Moment from 'moment';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams, useHistory } from 'react-router-dom';\nimport { Button, Row, Col, Image, ListGroup, Form } from 'react-bootstrap';\nimport Rating from '../Rating';\nimport { listProductDetails } from '../../actions/productActions';\nimport { fetchReviews, createReview, resetCreateReview } from '../../actions/reviewActions';\nimport Loader from '../Loader';\nimport Message from '../Message';\n\nconst ProductScreen = () => {\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(1);\n  const [comment, setComment] = useState('');\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {\n    product,\n    loading,\n    error\n  } = useSelector(state => state.productDetails);\n  const user = useSelector(state => state.userLogin.userInfo);\n  const productReviews = useSelector(state => state.reviewsFetch);\n  const {\n    error: errorReviewsFetch,\n    loading: loadingReviewsFetch\n  } = productReviews;\n  const {\n    reviews,\n    error: errorReviews,\n    loading: loadingReviews\n  } = productReviews;\n  const createdReview = useSelector(state => state.reviewsCreate);\n  const {\n    success: createReviewSuccess,\n    error: createReviewError,\n    loading: createReviewLoading\n  } = createdReview;\n  useEffect(() => {\n    dispatch(fetchReviews(id));\n\n    if (Object.keys(product).length === 0) {\n      dispatch(listProductDetails(id));\n    }\n  }, [dispatch, id, product, createReviewSuccess]);\n\n  const addToCarThandler = () => {\n    history.push(`/cart/${id}?qty=${qty}`);\n    setTimeout(() => {\n      history.push('/');\n    }, 1000);\n  };\n\n  const reviewSubmitHandler = e => {\n    e.preventDefault();\n    dispatch(createReview({\n      product_id: id,\n      rating,\n      comment\n    }));\n    setRating('');\n    setComment('');\n    dispatch(resetCreateReview());\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => history.goBack(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, \"Go Back\"), ' '), loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }) : error ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    msg: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: product.image,\n    alt: product.name,\n    thumbnail: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 19\n    }\n  }, product.name)), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    value: product.rating,\n    text: `${product.num_reviews} Reviews`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 19\n    }\n  }, \"Price:\", product.price)), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"Description: \", product.description))), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, \"Price:\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, product.price))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, \"Status:\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, product.in_stock > 0 ? `In Stock` : `Out of Stock`))), product.in_stock > 0 && /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 23\n    }\n  }, \"Qty\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    value: qty,\n    onChange: e => setQty(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, [...Array(product.in_stock).keys()].map(index => /*#__PURE__*/React.createElement(\"option\", {\n    key: index + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 29\n    }\n  }, index + 1)))))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-block\",\n    disabled: product.in_stock === 0,\n    onClick: () => addToCarThandler(id, qty),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, \"Add to Cart\"))))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, \"Reviews\"))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, reviews.map(review => /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, review.username), ' ', /*#__PURE__*/React.createElement(Rating, {\n    value: review.rating,\n    forReviews: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, `${Moment(review.created_at).format('MMMM Do YYYY, h:mm:ss a')}`), /*#__PURE__*/React.createElement(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }, review.comment))), reviews.length === 0 && /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, errorReviews)), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, \"WRITE A CUSTOMER REVIEW\"), user !== null ? /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 19\n    }\n  }, createReviewError && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 23\n    }\n  }, createReviewError), createReviewSuccess && /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 23\n    }\n  }, \"Successfully Added Review\"), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 23\n    }\n  }, \"Rating\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    value: rating,\n    onChange: e => setRating(Number(e.target.value)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 25\n    }\n  }, \"1 - Poor\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 25\n    }\n  }, \"2 - Fair\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 25\n    }\n  }, \"3 - Good\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 25\n    }\n  }, \"4 - Very Good\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 25\n    }\n  }, \"5 - Excellent\"))), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 23\n    }\n  }, \"Comment\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"textarea\",\n    rows: 3,\n    value: comment,\n    onChange: e => setComment(e.target.value),\n    required: \"required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    onClick: reviewSubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 21\n    }\n  }, \"Submit\")) : /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 19\n    }\n  }, \"Please \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 28\n    }\n  }, \"sign in\"), \" to write a review\"))))));\n};\n\nexport default ProductScreen;","map":{"version":3,"sources":["D:/Development/portfolio-projects/e-commerce-practice/frontend/src/components/screens/ProductScreen.jsx"],"names":["React","useState","useEffect","Moment","useDispatch","useSelector","Link","useParams","useHistory","Button","Row","Col","Image","ListGroup","Form","Rating","listProductDetails","fetchReviews","createReview","resetCreateReview","Loader","Message","ProductScreen","qty","setQty","rating","setRating","comment","setComment","id","history","dispatch","product","loading","error","state","productDetails","user","userLogin","userInfo","productReviews","reviewsFetch","errorReviewsFetch","loadingReviewsFetch","reviews","errorReviews","loadingReviews","createdReview","reviewsCreate","success","createReviewSuccess","createReviewError","createReviewLoading","Object","keys","length","addToCarThandler","push","setTimeout","reviewSubmitHandler","e","preventDefault","product_id","goBack","image","name","num_reviews","price","description","in_stock","target","value","Array","map","index","review","username","created_at","format","Number"],"mappings":"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","sourcesContent":["/* eslint-disable no-nested-ternary */\r\nimport React, { useState, useEffect } from 'react';\r\nimport Moment from 'moment';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useParams, useHistory } from 'react-router-dom';\r\nimport { Button, Row, Col, Image, ListGroup, Form } from 'react-bootstrap';\r\nimport Rating from '../Rating';\r\nimport { listProductDetails } from '../../actions/productActions';\r\nimport {\r\n  fetchReviews,\r\n  createReview,\r\n  resetCreateReview,\r\n} from '../../actions/reviewActions';\r\nimport Loader from '../Loader';\r\nimport Message from '../Message';\r\n\r\nconst ProductScreen = () => {\r\n  const [qty, setQty] = useState(1);\r\n  const [rating, setRating] = useState(1);\r\n  const [comment, setComment] = useState('');\r\n  const { id } = useParams();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const { product, loading, error } = useSelector(\r\n    (state) => state.productDetails\r\n  );\r\n\r\n  const user = useSelector((state) => state.userLogin.userInfo);\r\n\r\n  const productReviews = useSelector((state) => state.reviewsFetch);\r\n  const {\r\n    error: errorReviewsFetch,\r\n    loading: loadingReviewsFetch,\r\n  } = productReviews;\r\n\r\n  const {\r\n    reviews,\r\n    error: errorReviews,\r\n    loading: loadingReviews,\r\n  } = productReviews;\r\n\r\n  const createdReview = useSelector((state) => state.reviewsCreate);\r\n  const {\r\n    success: createReviewSuccess,\r\n    error: createReviewError,\r\n    loading: createReviewLoading,\r\n  } = createdReview;\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchReviews(id));\r\n    if (Object.keys(product).length === 0) {\r\n      dispatch(listProductDetails(id));\r\n    }\r\n  }, [dispatch, id, product, createReviewSuccess]);\r\n\r\n  const addToCarThandler = () => {\r\n    history.push(`/cart/${id}?qty=${qty}`);\r\n    setTimeout(() => {\r\n      history.push('/');\r\n    }, 1000);\r\n  };\r\n\r\n  const reviewSubmitHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(createReview({ product_id: id, rating, comment }));\r\n    setRating('');\r\n    setComment('');\r\n    dispatch(resetCreateReview());\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Link>\r\n        <Button onClick={() => history.goBack()}>Go Back</Button>{' '}\r\n      </Link>\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant=\"danger\" msg={error} />\r\n      ) : (\r\n        <>\r\n          <Row className=\"mt-5\">\r\n            <Col md={6}>\r\n              <Image src={product.image} alt={product.name} thumbnail />\r\n            </Col>\r\n            <Col md={3}>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h2>{product.name}</h2>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <Rating\r\n                    value={product.rating}\r\n                    text={`${product.num_reviews} Reviews`}\r\n                  />\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <h5>\r\n                    Price:\r\n                    {product.price}\r\n                  </h5>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  Description: {product.description}\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Col>\r\n            <Col>\r\n              <ListGroup>\r\n                <ListGroup.Item>\r\n                  <Row>\r\n                    <Col>Price:</Col>\r\n                    <Col>{product.price}</Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <Row>\r\n                    <Col>Status:</Col>\r\n                    <Col>\r\n                      {product.in_stock > 0 ? `In Stock` : `Out of Stock`}\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n                {product.in_stock > 0 && (\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>Qty</Col>\r\n                      <Col>\r\n                        <Form.Control\r\n                          as=\"select\"\r\n                          value={qty}\r\n                          onChange={(e) => setQty(e.target.value)}\r\n                        >\r\n                          {[...Array(product.in_stock).keys()].map((index) => (\r\n                            <option key={index + 1}>{index + 1}</option>\r\n                          ))}\r\n                        </Form.Control>\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                )}\r\n                <ListGroup.Item>\r\n                  <Button\r\n                    className=\"btn-block\"\r\n                    disabled={product.in_stock === 0}\r\n                    onClick={() => addToCarThandler(id, qty)}\r\n                  >\r\n                    Add to Cart\r\n                  </Button>\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col md={6}>\r\n              <h2>Reviews</h2>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col md={6}>\r\n              <ListGroup variant=\"flush\">\r\n                {reviews.map((review) => (\r\n                  <ListGroup.Item>\r\n                    <pre>{review.username}</pre>{' '}\r\n                    <Rating value={review.rating} forReviews />\r\n                    <p>{`${Moment(review.created_at).format(\r\n                      'MMMM Do YYYY, h:mm:ss a'\r\n                    )}`}</p>\r\n                    <pre>{review.comment}</pre>\r\n                  </ListGroup.Item>\r\n                ))}\r\n                {reviews.length === 0 && (\r\n                  <Message>\r\n                    <h5>{errorReviews}</h5>\r\n                  </Message>\r\n                )}\r\n                <h2>WRITE A CUSTOMER REVIEW</h2>\r\n                {user !== null ? (\r\n                  <ListGroup.Item>\r\n                    {createReviewError && (\r\n                      <Message variant=\"danger\">{createReviewError}</Message>\r\n                    )}\r\n                    {createReviewSuccess && (\r\n                      <Message variant=\"success\">\r\n                        Successfully Added Review\r\n                      </Message>\r\n                    )}\r\n\r\n                    <Form.Group>\r\n                      <Form.Label>Rating</Form.Label>\r\n                      <Form.Control\r\n                        as=\"select\"\r\n                        value={rating}\r\n                        onChange={(e) => setRating(Number(e.target.value))}\r\n                      >\r\n                        <option value={1}>1 - Poor</option>\r\n                        <option value={2}>2 - Fair</option>\r\n                        <option value={3}>3 - Good</option>\r\n                        <option value={4}>4 - Very Good</option>\r\n                        <option value={5}>5 - Excellent</option>\r\n                      </Form.Control>\r\n                    </Form.Group>\r\n                    <Form.Group controlId=\"comment\">\r\n                      <Form.Label>Comment</Form.Label>\r\n                      <Form.Control\r\n                        as=\"textarea\"\r\n                        rows={3}\r\n                        value={comment}\r\n                        onChange={(e) => setComment(e.target.value)}\r\n                        required=\"required\"\r\n                      />\r\n                    </Form.Group>\r\n                    <Button onClick={reviewSubmitHandler}>Submit</Button>\r\n                  </ListGroup.Item>\r\n                ) : (\r\n                  <Message>\r\n                    Please <Link to=\"/login\">sign in</Link> to write a review\r\n                  </Message>\r\n                )}\r\n              </ListGroup>\r\n            </Col>\r\n          </Row>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductScreen;\r\n"]},"metadata":{},"sourceType":"module"}