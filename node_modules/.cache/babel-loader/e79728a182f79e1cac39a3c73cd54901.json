{"ast":null,"code":"/* eslint-disable camelcase */import React from'react';import{Link,useHistory}from'react-router-dom';import{Button,Row,Col,ListGroup,Image,Card}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{FaDollarSign}from'react-icons/fa';import{uuid}from'uuidv4';import Message from'../Message';import CheckoutSteps from'../CheckoutSteps';import{createOrder}from'../../actions/orderActions';import{resetCartItems}from'../../actions/cartActions';var PlaceOrderScreen=function PlaceOrderScreen(){var history=useHistory();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.cart;}),cartItems=_useSelector.cartItems,shippingAddress=_useSelector.shippingAddress,paymentMethod=_useSelector.paymentMethod;var _useSelector2=useSelector(function(state){return state.userLogin;}),_useSelector2$userInf=_useSelector2.userInfo,user_id=_useSelector2$userInf.user_id,email=_useSelector2$userInf.email;// TODO - CALCULATIONS FOR PRICE\nvar addDecimals=function addDecimals(num){return(Math.round(num*100)/100).toFixed(2);};var subTotalPrice=addDecimals(cartItems.reduce(function(accu,item){return accu+parseInt(item.price)*item.qty;},0));var shippingPrice=addDecimals(subTotalPrice>100?0:100);var taxPrice=addDecimals(Number((0.15*subTotalPrice).toFixed(2)));var totalPrice=(Number(subTotalPrice)+Number(shippingPrice)+Number(taxPrice)).toFixed(2);var placeOrderHandler=function placeOrderHandler(e){e.preventDefault();var order_id=uuid();var orderItems=cartItems.map(function(item){return{order_id:order_id,product_id:item.product,user_id:user_id,quantity:item.qty,payment_method:paymentMethod,payment_email_address:email};});orderItems.forEach(function(item){dispatch(createOrder({order_id:item.order_id,product_id:item.product_id,user_id:item.user_id,quantity:item.quantity,payment_method:item.payment_method,payment_email_address:item.payment_email_address,shipping_address:shippingAddress.address,shipping_city:shippingAddress.city,shipping_postal_code:shippingAddress.postalCode,shipping_country:shippingAddress.country}));});dispatch(resetCartItems());history.push('/');};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Address:\"),shippingAddress.address,\",\",shippingAddress.city,' ',shippingAddress.postalCode,\" \",shippingAddress.country)),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Payment Method\"),/*#__PURE__*/React.createElement(\"strong\",null,\"Method:\"),paymentMethod),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Order List\"),cartItems.length===0?/*#__PURE__*/React.createElement(Message,null,\"Your cart is empty\"):/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},cartItems.map(function(item){return/*#__PURE__*/React.createElement(ListGroup.Item,{key:item.product},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:2},/*#__PURE__*/React.createElement(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Link,{to:\"/product/<FaDollarSign />{item.product}\"},item.name)),/*#__PURE__*/React.createElement(Col,{md:4},item.qty,\" x \",/*#__PURE__*/React.createElement(FaDollarSign,null),item.price,\" = \",/*#__PURE__*/React.createElement(FaDollarSign,null),item.qty*item.price)));}))))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Items\"),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FaDollarSign,null),subTotalPrice))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Shipping\"),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FaDollarSign,null),shippingPrice))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Tax\"),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FaDollarSign,null),taxPrice))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Total\"),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FaDollarSign,null),totalPrice))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.lenght===0,onClick:placeOrderHandler},\"Place Order\")))))));};export default PlaceOrderScreen;","map":{"version":3,"sources":["D:/Development/A-portfolio-projects/e-commerce-practice/frontend/src/components/screens/PlaceOrderScreen.jsx"],"names":["React","Link","useHistory","Button","Row","Col","ListGroup","Image","Card","useDispatch","useSelector","FaDollarSign","uuid","Message","CheckoutSteps","createOrder","resetCartItems","PlaceOrderScreen","history","dispatch","state","cart","cartItems","shippingAddress","paymentMethod","userLogin","userInfo","user_id","email","addDecimals","num","Math","round","toFixed","subTotalPrice","reduce","accu","item","parseInt","price","qty","shippingPrice","taxPrice","Number","totalPrice","placeOrderHandler","e","preventDefault","order_id","orderItems","map","product_id","product","quantity","payment_method","payment_email_address","forEach","shipping_address","address","shipping_city","city","shipping_postal_code","postalCode","shipping_country","country","push","length","image","name","lenght"],"mappings":"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","sourcesContent":["/* eslint-disable camelcase */\r\nimport React from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { Button, Row, Col, ListGroup, Image, Card } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { FaDollarSign } from 'react-icons/fa';\r\nimport { uuid } from 'uuidv4';\r\nimport Message from '../Message';\r\nimport CheckoutSteps from '../CheckoutSteps';\r\nimport { createOrder } from '../../actions/orderActions';\r\nimport { resetCartItems } from '../../actions/cartActions';\r\n\r\nconst PlaceOrderScreen = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const { cartItems, shippingAddress, paymentMethod } = useSelector(\r\n    (state) => state.cart\r\n  );\r\n\r\n  const {\r\n    userInfo: { user_id, email },\r\n  } = useSelector((state) => state.userLogin);\r\n\r\n  // TODO - CALCULATIONS FOR PRICE\r\n  const addDecimals = (num) => (Math.round(num * 100) / 100).toFixed(2);\r\n  const subTotalPrice = addDecimals(\r\n    cartItems.reduce((accu, item) => accu + parseInt(item.price) * item.qty, 0)\r\n  );\r\n  const shippingPrice = addDecimals(subTotalPrice > 100 ? 0 : 100);\r\n  const taxPrice = addDecimals(Number((0.15 * subTotalPrice).toFixed(2)));\r\n\r\n  const totalPrice = (\r\n    Number(subTotalPrice) +\r\n    Number(shippingPrice) +\r\n    Number(taxPrice)\r\n  ).toFixed(2);\r\n\r\n  const placeOrderHandler = (e) => {\r\n    e.preventDefault();\r\n    const order_id = uuid();\r\n\r\n    const orderItems = cartItems.map((item) => ({\r\n      order_id,\r\n      product_id: item.product,\r\n      user_id,\r\n      quantity: item.qty,\r\n      payment_method: paymentMethod,\r\n      payment_email_address: email,\r\n    }));\r\n    orderItems.forEach((item) => {\r\n      dispatch(\r\n        createOrder({\r\n          order_id: item.order_id,\r\n          product_id: item.product_id,\r\n          user_id: item.user_id,\r\n          quantity: item.quantity,\r\n          payment_method: item.payment_method,\r\n          payment_email_address: item.payment_email_address,\r\n          shipping_address: shippingAddress.address,\r\n          shipping_city: shippingAddress.city,\r\n          shipping_postal_code: shippingAddress.postalCode,\r\n          shipping_country: shippingAddress.country,\r\n        })\r\n      );\r\n    });\r\n\r\n    dispatch(resetCartItems());\r\n    history.push('/');\r\n  };\r\n  return (\r\n    <>\r\n      <CheckoutSteps step1 step2 step3 step4 />\r\n      <Row>\r\n        <Col md={8}>\r\n          <ListGroup variant=\"flush\">\r\n            <ListGroup.Item>\r\n              <h2>Shipping</h2>\r\n              <p>\r\n                <strong>Address:</strong>\r\n                {shippingAddress.address},{shippingAddress.city}{' '}\r\n                {shippingAddress.postalCode} {shippingAddress.country}\r\n              </p>\r\n            </ListGroup.Item>\r\n            <ListGroup.Item>\r\n              <h2>Payment Method</h2>\r\n              <strong>Method:</strong>\r\n              {paymentMethod}\r\n            </ListGroup.Item>\r\n            <ListGroup.Item>\r\n              <h2>Order List</h2>\r\n              {cartItems.length === 0 ? (\r\n                <Message>Your cart is empty</Message>\r\n              ) : (\r\n                <ListGroup variant=\"flush\">\r\n                  {cartItems.map((item) => (\r\n                    <ListGroup.Item key={item.product}>\r\n                      <Row>\r\n                        <Col md={2}>\r\n                          <Image\r\n                            src={item.image}\r\n                            alt={item.name}\r\n                            fluid\r\n                            rounded\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Link to=\"/product/<FaDollarSign />{item.product}\">\r\n                            {item.name}\r\n                          </Link>\r\n                        </Col>\r\n                        <Col md={4}>\r\n                          {item.qty} x <FaDollarSign />\r\n                          {item.price} = <FaDollarSign />\r\n                          {item.qty * item.price}\r\n                        </Col>\r\n                      </Row>\r\n                    </ListGroup.Item>\r\n                  ))}\r\n                </ListGroup>\r\n              )}\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card>\r\n            <ListGroup variant=\"flush\">\r\n              <ListGroup.Item>\r\n                <h2>Order Summary</h2>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Items</Col>\r\n                  <Col>\r\n                    <FaDollarSign />\r\n                    {subTotalPrice}\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Shipping</Col>\r\n                  <Col>\r\n                    <FaDollarSign />\r\n                    {shippingPrice}\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Tax</Col>\r\n                  <Col>\r\n                    <FaDollarSign />\r\n                    {taxPrice}\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Total</Col>\r\n                  <Col>\r\n                    <FaDollarSign />\r\n                    {totalPrice}\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Button\r\n                  type=\"button\"\r\n                  className=\"btn-block\"\r\n                  disabled={cartItems.lenght === 0}\r\n                  onClick={placeOrderHandler}\r\n                >\r\n                  Place Order\r\n                </Button>\r\n              </ListGroup.Item>\r\n            </ListGroup>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\nexport default PlaceOrderScreen;\r\n"]},"metadata":{},"sourceType":"module"}