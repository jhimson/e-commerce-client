{"ast":null,"code":"var _jsxFileName = \"D:\\\\Development\\\\portfolio-projects\\\\e-commerce-practice\\\\frontend\\\\src\\\\components\\\\screens\\\\PlaceOrderScreen.jsx\";\n\n/* eslint-disable camelcase */\nimport React, { useState } from 'react';\nimport { Link, useLocation, useHistory } from 'react-router-dom';\nimport { Button, Row, Col, ListGroup, Image, Card } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { FaDollarSign } from 'react-icons/fa';\nimport { uuid } from 'uuidv4';\nimport Message from '../Message';\nimport CheckoutSteps from '../CheckoutSteps';\nimport { createOrder } from '../../actions/orderActions';\nimport { resetCartItems } from '../../actions/cartActions';\n\nconst PlaceOrderScreen = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {\n    cartItems,\n    shippingAddress,\n    paymentMethod\n  } = useSelector(state => state.cart);\n  const {\n    userInfo: {\n      user_id,\n      email\n    }\n  } = useSelector(state => state.userLogin); // TODO - CALCULATIONS FOR PRICE\n\n  const addDecimals = num => (Math.round(num * 100) / 100).toFixed(2);\n\n  const subTotalPrice = addDecimals(cartItems.reduce((accu, item) => accu + parseInt(item.price) * item.qty, 0));\n  const shippingPrice = addDecimals(subTotalPrice > 100 ? 0 : 100);\n  const taxPrice = addDecimals(Number((0.15 * subTotalPrice).toFixed(2)));\n  const totalPrice = (Number(subTotalPrice) + Number(shippingPrice) + Number(taxPrice)).toFixed(2);\n\n  const placeOrderHandler = e => {\n    e.preventDefault();\n    const order_id = uuid();\n    const orderItems = cartItems.map(item => ({\n      order_id,\n      product_id: item.product,\n      user_id,\n      quantity: item.qty,\n      payment_method: paymentMethod,\n      payment_email_address: email\n    }));\n    console.log('WTF', orderItems);\n    orderItems.forEach(item => {\n      dispatch(createOrder({\n        order_id: item.order_id,\n        product_id: item.product_id,\n        user_id: item.user_id,\n        quantity: item.quantity,\n        payment_method: item.payment_method,\n        payment_email_address: item.payment_email_address\n      }));\n    });\n    dispatch(resetCartItems());\n    history.push('/');\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CheckoutSteps, {\n    step1: true,\n    step2: true,\n    step3: true,\n    step4: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, \"Address:\"), shippingAddress.address, \",\", shippingAddress.city, ' ', shippingAddress.postalCode, \" \", shippingAddress.country)), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, \"Payment Method\"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, \"Method:\"), paymentMethod), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, \"Order List\"), cartItems.length === 0 ? /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, \"Your cart is empty\") : /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, cartItems.map(item => /*#__PURE__*/React.createElement(ListGroup.Item, {\n    key: item.product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: item.image,\n    alt: item.name,\n    fluid: true,\n    rounded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 27\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/product/<FaDollarSign />{item.product}\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 27\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  }, item.qty, \" x \", /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 40\n    }\n  }), item.price, \" = \", /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 42\n    }\n  }), item.qty * item.price)))))))), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, \"Order Summary\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }), subTotalPrice))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }), shippingPrice))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 19\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }), taxPrice))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FaDollarSign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }), totalPrice))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn-block\",\n    disabled: cartItems.lenght === 0,\n    onClick: placeOrderHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, \"Place Order\")))))));\n};\n\nexport default PlaceOrderScreen;","map":{"version":3,"sources":["D:/Development/portfolio-projects/e-commerce-practice/frontend/src/components/screens/PlaceOrderScreen.jsx"],"names":["React","useState","Link","useLocation","useHistory","Button","Row","Col","ListGroup","Image","Card","useDispatch","useSelector","FaDollarSign","uuid","Message","CheckoutSteps","createOrder","resetCartItems","PlaceOrderScreen","history","dispatch","cartItems","shippingAddress","paymentMethod","state","cart","userInfo","user_id","email","userLogin","addDecimals","num","Math","round","toFixed","subTotalPrice","reduce","accu","item","parseInt","price","qty","shippingPrice","taxPrice","Number","totalPrice","placeOrderHandler","e","preventDefault","order_id","orderItems","map","product_id","product","quantity","payment_method","payment_email_address","console","log","forEach","push","address","city","postalCode","country","length","image","name","lenght"],"mappings":";;AAAA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,WAAf,EAA4BC,UAA5B,QAA8C,kBAA9C;AACA,SAASC,MAAT,EAAiBC,GAAjB,EAAsBC,GAAtB,EAA2BC,SAA3B,EAAsCC,KAAtC,EAA6CC,IAA7C,QAAyD,iBAAzD;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,SAASC,cAAT,QAA+B,2BAA/B;;AAEA,MAAMC,gBAAgB,GAAG,MAAM;AAC7B,QAAMC,OAAO,GAAGhB,UAAU,EAA1B;AACA,QAAMiB,QAAQ,GAAGV,WAAW,EAA5B;AACA,QAAM;AAAEW,IAAAA,SAAF;AAAaC,IAAAA,eAAb;AAA8BC,IAAAA;AAA9B,MAAgDZ,WAAW,CAC9Da,KAAD,IAAWA,KAAK,CAACC,IAD8C,CAAjE;AAIA,QAAM;AACJC,IAAAA,QAAQ,EAAE;AAAEC,MAAAA,OAAF;AAAWC,MAAAA;AAAX;AADN,MAEFjB,WAAW,CAAEa,KAAD,IAAWA,KAAK,CAACK,SAAlB,CAFf,CAP6B,CAW7B;;AAEA,QAAMC,WAAW,GAAIC,GAAD,IAAS,CAACC,IAAI,CAACC,KAAL,CAAWF,GAAG,GAAG,GAAjB,IAAwB,GAAzB,EAA8BG,OAA9B,CAAsC,CAAtC,CAA7B;;AAEA,QAAMC,aAAa,GAAGL,WAAW,CAC/BT,SAAS,CAACe,MAAV,CAAiB,CAACC,IAAD,EAAOC,IAAP,KAAgBD,IAAI,GAAGE,QAAQ,CAACD,IAAI,CAACE,KAAN,CAAR,GAAuBF,IAAI,CAACG,GAApE,EAAyE,CAAzE,CAD+B,CAAjC;AAGA,QAAMC,aAAa,GAAGZ,WAAW,CAACK,aAAa,GAAG,GAAhB,GAAsB,CAAtB,GAA0B,GAA3B,CAAjC;AACA,QAAMQ,QAAQ,GAAGb,WAAW,CAACc,MAAM,CAAC,CAAC,OAAOT,aAAR,EAAuBD,OAAvB,CAA+B,CAA/B,CAAD,CAAP,CAA5B;AAEA,QAAMW,UAAU,GAAG,CACjBD,MAAM,CAACT,aAAD,CAAN,GACAS,MAAM,CAACF,aAAD,CADN,GAEAE,MAAM,CAACD,QAAD,CAHW,EAIjBT,OAJiB,CAIT,CAJS,CAAnB;;AAMA,QAAMY,iBAAiB,GAAIC,CAAD,IAAO;AAC/BA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMC,QAAQ,GAAGpC,IAAI,EAArB;AAEA,UAAMqC,UAAU,GAAG7B,SAAS,CAAC8B,GAAV,CAAeb,IAAD,KAAW;AAC1CW,MAAAA,QAD0C;AAE1CG,MAAAA,UAAU,EAAEd,IAAI,CAACe,OAFyB;AAG1C1B,MAAAA,OAH0C;AAI1C2B,MAAAA,QAAQ,EAAEhB,IAAI,CAACG,GAJ2B;AAK1Cc,MAAAA,cAAc,EAAEhC,aAL0B;AAM1CiC,MAAAA,qBAAqB,EAAE5B;AANmB,KAAX,CAAd,CAAnB;AAQA6B,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBR,UAAnB;AACAA,IAAAA,UAAU,CAACS,OAAX,CAAoBrB,IAAD,IAAU;AAC3BlB,MAAAA,QAAQ,CACNJ,WAAW,CAAC;AACViC,QAAAA,QAAQ,EAAEX,IAAI,CAACW,QADL;AAEVG,QAAAA,UAAU,EAAEd,IAAI,CAACc,UAFP;AAGVzB,QAAAA,OAAO,EAAEW,IAAI,CAACX,OAHJ;AAIV2B,QAAAA,QAAQ,EAAEhB,IAAI,CAACgB,QAJL;AAKVC,QAAAA,cAAc,EAAEjB,IAAI,CAACiB,cALX;AAMVC,QAAAA,qBAAqB,EAAElB,IAAI,CAACkB;AANlB,OAAD,CADL,CAAR;AAUD,KAXD;AAaApC,IAAAA,QAAQ,CAACH,cAAc,EAAf,CAAR;AACAE,IAAAA,OAAO,CAACyC,IAAR,CAAa,GAAb;AACD,GA5BD;;AA6BA,sBACE,uDACE,oBAAC,aAAD;AAAe,IAAA,KAAK,MAApB;AAAqB,IAAA,KAAK,MAA1B;AAA2B,IAAA,KAAK,MAAhC;AAAiC,IAAA,KAAK,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,OAAO,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEGtC,eAAe,CAACuC,OAFnB,OAE6BvC,eAAe,CAACwC,IAF7C,EAEmD,GAFnD,EAGGxC,eAAe,CAACyC,UAHnB,OAGgCzC,eAAe,CAAC0C,OAHhD,CAFF,CADF,eASE,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFF,EAGGzC,aAHH,CATF,eAcE,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEGF,SAAS,CAAC4C,MAAV,KAAqB,CAArB,gBACC,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADD,gBAGC,oBAAC,SAAD;AAAW,IAAA,OAAO,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG5C,SAAS,CAAC8B,GAAV,CAAeb,IAAD,iBACb,oBAAC,SAAD,CAAW,IAAX;AAAgB,IAAA,GAAG,EAAEA,IAAI,CAACe,OAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AACE,IAAA,GAAG,EAAEf,IAAI,CAAC4B,KADZ;AAEE,IAAA,GAAG,EAAE5B,IAAI,CAAC6B,IAFZ;AAGE,IAAA,KAAK,MAHP;AAIE,IAAA,OAAO,MAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eASE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,yCAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG7B,IAAI,CAAC6B,IADR,CADF,CATF,eAcE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG7B,IAAI,CAACG,GADR,sBACe,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADf,EAEGH,IAAI,CAACE,KAFR,sBAEiB,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFjB,EAGGF,IAAI,CAACG,GAAL,GAAWH,IAAI,CAACE,KAHnB,CAdF,CADF,CADD,CADH,CALJ,CAdF,CADF,CADF,eAmDE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,OAAO,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,CADF,eAIE,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEGL,aAFH,CAFF,CADF,CAJF,eAaE,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEGO,aAFH,CAFF,CADF,CAbF,eAsBE,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,eAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEGC,QAFH,CAFF,CADF,CAtBF,eA+BE,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEGE,UAFH,CAFF,CADF,CA/BF,eAwCE,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAC,WAFZ;AAGE,IAAA,QAAQ,EAAExB,SAAS,CAAC+C,MAAV,KAAqB,CAHjC;AAIE,IAAA,OAAO,EAAEtB,iBAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CAxCF,CADF,CADF,CAnDF,CAFF,CADF;AAgHD,CAxKD;;AA0KA,eAAe5B,gBAAf","sourcesContent":["/* eslint-disable camelcase */\r\nimport React, { useState } from 'react';\r\nimport { Link, useLocation, useHistory } from 'react-router-dom';\r\nimport { Button, Row, Col, ListGroup, Image, Card } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { FaDollarSign } from 'react-icons/fa';\r\nimport { uuid } from 'uuidv4';\r\nimport Message from '../Message';\r\nimport CheckoutSteps from '../CheckoutSteps';\r\nimport { createOrder } from '../../actions/orderActions';\r\nimport { resetCartItems } from '../../actions/cartActions';\r\n\r\nconst PlaceOrderScreen = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const { cartItems, shippingAddress, paymentMethod } = useSelector(\r\n    (state) => state.cart\r\n  );\r\n\r\n  const {\r\n    userInfo: { user_id, email },\r\n  } = useSelector((state) => state.userLogin);\r\n\r\n  // TODO - CALCULATIONS FOR PRICE\r\n\r\n  const addDecimals = (num) => (Math.round(num * 100) / 100).toFixed(2);\r\n\r\n  const subTotalPrice = addDecimals(\r\n    cartItems.reduce((accu, item) => accu + parseInt(item.price) * item.qty, 0)\r\n  );\r\n  const shippingPrice = addDecimals(subTotalPrice > 100 ? 0 : 100);\r\n  const taxPrice = addDecimals(Number((0.15 * subTotalPrice).toFixed(2)));\r\n\r\n  const totalPrice = (\r\n    Number(subTotalPrice) +\r\n    Number(shippingPrice) +\r\n    Number(taxPrice)\r\n  ).toFixed(2);\r\n\r\n  const placeOrderHandler = (e) => {\r\n    e.preventDefault();\r\n    const order_id = uuid();\r\n\r\n    const orderItems = cartItems.map((item) => ({\r\n      order_id,\r\n      product_id: item.product,\r\n      user_id,\r\n      quantity: item.qty,\r\n      payment_method: paymentMethod,\r\n      payment_email_address: email,\r\n    }));\r\n    console.log('WTF', orderItems);\r\n    orderItems.forEach((item) => {\r\n      dispatch(\r\n        createOrder({\r\n          order_id: item.order_id,\r\n          product_id: item.product_id,\r\n          user_id: item.user_id,\r\n          quantity: item.quantity,\r\n          payment_method: item.payment_method,\r\n          payment_email_address: item.payment_email_address,\r\n        })\r\n      );\r\n    });\r\n\r\n    dispatch(resetCartItems());\r\n    history.push('/');\r\n  };\r\n  return (\r\n    <>\r\n      <CheckoutSteps step1 step2 step3 step4 />\r\n      <Row>\r\n        <Col md={8}>\r\n          <ListGroup variant=\"flush\">\r\n            <ListGroup.Item>\r\n              <h2>Shipping</h2>\r\n              <p>\r\n                <strong>Address:</strong>\r\n                {shippingAddress.address},{shippingAddress.city}{' '}\r\n                {shippingAddress.postalCode} {shippingAddress.country}\r\n              </p>\r\n            </ListGroup.Item>\r\n            <ListGroup.Item>\r\n              <h2>Payment Method</h2>\r\n              <strong>Method:</strong>\r\n              {paymentMethod}\r\n            </ListGroup.Item>\r\n            <ListGroup.Item>\r\n              <h2>Order List</h2>\r\n              {cartItems.length === 0 ? (\r\n                <Message>Your cart is empty</Message>\r\n              ) : (\r\n                <ListGroup variant=\"flush\">\r\n                  {cartItems.map((item) => (\r\n                    <ListGroup.Item key={item.product}>\r\n                      <Row>\r\n                        <Col md={2}>\r\n                          <Image\r\n                            src={item.image}\r\n                            alt={item.name}\r\n                            fluid\r\n                            rounded\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Link to=\"/product/<FaDollarSign />{item.product}\">\r\n                            {item.name}\r\n                          </Link>\r\n                        </Col>\r\n                        <Col md={4}>\r\n                          {item.qty} x <FaDollarSign />\r\n                          {item.price} = <FaDollarSign />\r\n                          {item.qty * item.price}\r\n                        </Col>\r\n                      </Row>\r\n                    </ListGroup.Item>\r\n                  ))}\r\n                </ListGroup>\r\n              )}\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card>\r\n            <ListGroup variant=\"flush\">\r\n              <ListGroup.Item>\r\n                <h2>Order Summary</h2>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Items</Col>\r\n                  <Col>\r\n                    <FaDollarSign />\r\n                    {subTotalPrice}\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Shipping</Col>\r\n                  <Col>\r\n                    <FaDollarSign />\r\n                    {shippingPrice}\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Tax</Col>\r\n                  <Col>\r\n                    <FaDollarSign />\r\n                    {taxPrice}\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Total</Col>\r\n                  <Col>\r\n                    <FaDollarSign />\r\n                    {totalPrice}\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Button\r\n                  type=\"button\"\r\n                  className=\"btn-block\"\r\n                  disabled={cartItems.lenght === 0}\r\n                  onClick={placeOrderHandler}\r\n                >\r\n                  Place Order\r\n                </Button>\r\n              </ListGroup.Item>\r\n            </ListGroup>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PlaceOrderScreen;\r\n"]},"metadata":{},"sourceType":"module"}