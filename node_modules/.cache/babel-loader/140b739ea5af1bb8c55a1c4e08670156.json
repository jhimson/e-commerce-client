{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Development\\\\A-portfolio-projects\\\\e-commerce-practice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\Development\\\\A-portfolio-projects\\\\e-commerce-practice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";/* eslint-disable no-nested-ternary */import React,{useState,useEffect}from'react';import Moment from'moment';import{useDispatch,useSelector}from'react-redux';import{Link,useParams,useHistory}from'react-router-dom';import{Button,Row,Col,Image,ListGroup,Form}from'react-bootstrap';import Rating from'../Rating';import{listProductDetails}from'../../actions/productActions';import{fetchReviews,createReview,resetCreateReview}from'../../actions/reviewActions';import Loader from'../Loader';import Message from'../Message';import Meta from'../Meta';var ProductScreen=function ProductScreen(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var _useParams=useParams(),id=_useParams.id;var history=useHistory();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.productDetails;}),product=_useSelector.product,loading=_useSelector.loading,error=_useSelector.error;var user=useSelector(function(state){return state.userLogin.userInfo;});var productReviews=useSelector(function(state){return state.reviewsFetch;});var errorReviewsFetch=productReviews.error,loadingReviewsFetch=productReviews.loading;var reviews=productReviews.reviews,errorReviews=productReviews.error,loadingReviews=productReviews.loading;var createdReview=useSelector(function(state){return state.reviewsCreate;});var createReviewSuccess=createdReview.success,createReviewError=createdReview.error,createReviewLoading=createdReview.loading;useEffect(function(){dispatch(fetchReviews(id));if(Object.keys(product).length===0){dispatch(listProductDetails(id));}},[dispatch,id,product,createReviewSuccess]);var addToCarThandler=function addToCarThandler(){history.push(\"/cart/\".concat(id,\"?qty=\").concat(qty));setTimeout(function(){history.push('/');},1000);};var reviewSubmitHandler=function reviewSubmitHandler(e){e.preventDefault();dispatch(createReview({product_id:id,rating:rating,comment:comment}));setRating('');setComment('');dispatch(resetCreateReview());};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(Button,null,\"Go Back\"),' '),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\",msg:error}):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Meta,{title:product.name}),/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(Image,{src:product.image,alt:product.name,thumbnail:true})),/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,product.name)),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Rating,{value:product.rating,text:\"\".concat(product.num_reviews,\" Reviews\")})),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h5\",null,\"Price:\",product.price)),/*#__PURE__*/React.createElement(ListGroup.Item,null,\"Description: \",product.description))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(ListGroup,null,/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Price:\"),/*#__PURE__*/React.createElement(Col,null,product.price))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Status:\"),/*#__PURE__*/React.createElement(Col,null,product.in_stock>0?\"In Stock\":\"Out of Stock\"))),product.in_stock>0&&/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Qty\"),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",value:qty,onChange:function onChange(e){return setQty(e.target.value);}},_toConsumableArray(Array(product.in_stock).keys()).map(function(index){return/*#__PURE__*/React.createElement(\"option\",{key:index+1},index+1);}))))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Button,{className:\"btn-block\",disabled:product.in_stock===0,onClick:function onClick(){return addToCarThandler(id,qty);}},\"Add to Cart\"))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(\"h2\",null,\"Reviews\"))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:6},createReviewLoading&&/*#__PURE__*/React.createElement(Loader,null),/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},reviews.map(function(review){return/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"pre\",null,review.username),' ',/*#__PURE__*/React.createElement(Rating,{value:review.rating,forReviews:true}),/*#__PURE__*/React.createElement(\"p\",null,\"\".concat(Moment(review.created_at).format('MMMM Do YYYY, h:mm:ss a'))),/*#__PURE__*/React.createElement(\"pre\",null,review.comment));}),reviews.length===0&&/*#__PURE__*/React.createElement(Message,null,/*#__PURE__*/React.createElement(\"h5\",null,errorReviews)),/*#__PURE__*/React.createElement(\"h2\",null,\"WRITE A CUSTOMER REVIEW\"),user!==null?/*#__PURE__*/React.createElement(ListGroup.Item,null,createReviewError&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},createReviewError),createReviewSuccess&&/*#__PURE__*/React.createElement(Message,{variant:\"success\"},\"Successfully Added Review\"),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,null,\"Rating\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",value:rating,onChange:function onChange(e){return setRating(Number(e.target.value));}},/*#__PURE__*/React.createElement(\"option\",{value:1},\"1 - Poor\"),/*#__PURE__*/React.createElement(\"option\",{value:2},\"2 - Fair\"),/*#__PURE__*/React.createElement(\"option\",{value:3},\"3 - Good\"),/*#__PURE__*/React.createElement(\"option\",{value:4},\"4 - Very Good\"),/*#__PURE__*/React.createElement(\"option\",{value:5},\"5 - Excellent\"))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"comment\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Comment\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",rows:3,value:comment,onChange:function onChange(e){return setComment(e.target.value);},required:\"required\"})),/*#__PURE__*/React.createElement(Button,{onClick:reviewSubmitHandler},\"Submit\")):/*#__PURE__*/React.createElement(Message,null,\"Please \",/*#__PURE__*/React.createElement(Link,{to:\"/login\"},\"sign in\"),\" to write a review\"))))));};export default ProductScreen;","map":{"version":3,"sources":["D:/Development/A-portfolio-projects/e-commerce-practice/frontend/src/components/screens/ProductScreen.jsx"],"names":["React","useState","useEffect","Moment","useDispatch","useSelector","Link","useParams","useHistory","Button","Row","Col","Image","ListGroup","Form","Rating","listProductDetails","fetchReviews","createReview","resetCreateReview","Loader","Message","Meta","ProductScreen","qty","setQty","rating","setRating","comment","setComment","id","history","dispatch","state","productDetails","product","loading","error","user","userLogin","userInfo","productReviews","reviewsFetch","errorReviewsFetch","loadingReviewsFetch","reviews","errorReviews","loadingReviews","createdReview","reviewsCreate","createReviewSuccess","success","createReviewError","createReviewLoading","Object","keys","length","addToCarThandler","push","setTimeout","reviewSubmitHandler","e","preventDefault","product_id","name","image","num_reviews","price","description","in_stock","target","value","Array","map","index","review","username","created_at","format","Number"],"mappings":"wYAAA,sCACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,CAAeC,SAAf,CAA0BC,UAA1B,KAA4C,kBAA5C,CACA,OAASC,MAAT,CAAiBC,GAAjB,CAAsBC,GAAtB,CAA2BC,KAA3B,CAAkCC,SAAlC,CAA6CC,IAA7C,KAAyD,iBAAzD,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,OAASC,kBAAT,KAAmC,8BAAnC,CACA,OACEC,YADF,CAEEC,YAFF,CAGEC,iBAHF,KAIO,6BAJP,CAKA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,MAAOC,CAAAA,IAAP,KAAiB,SAAjB,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,eACJtB,QAAQ,CAAC,CAAD,CADJ,wCACnBuB,GADmB,eACdC,MADc,8BAEExB,QAAQ,CAAC,CAAD,CAFV,yCAEnByB,MAFmB,eAEXC,SAFW,8BAGI1B,QAAQ,CAAC,EAAD,CAHZ,yCAGnB2B,OAHmB,eAGVC,UAHU,8BAIXtB,SAAS,EAJE,CAIlBuB,EAJkB,YAIlBA,EAJkB,CAK1B,GAAMC,CAAAA,OAAO,CAAGvB,UAAU,EAA1B,CACA,GAAMwB,CAAAA,QAAQ,CAAG5B,WAAW,EAA5B,CAN0B,iBAOUC,WAAW,CAC7C,SAAC4B,KAAD,QAAWA,CAAAA,KAAK,CAACC,cAAjB,EAD6C,CAPrB,CAOlBC,OAPkB,cAOlBA,OAPkB,CAOTC,OAPS,cAOTA,OAPS,CAOAC,KAPA,cAOAA,KAPA,CAW1B,GAAMC,CAAAA,IAAI,CAAGjC,WAAW,CAAC,SAAC4B,KAAD,QAAWA,CAAAA,KAAK,CAACM,SAAN,CAAgBC,QAA3B,EAAD,CAAxB,CAEA,GAAMC,CAAAA,cAAc,CAAGpC,WAAW,CAAC,SAAC4B,KAAD,QAAWA,CAAAA,KAAK,CAACS,YAAjB,EAAD,CAAlC,CAb0B,GAejBC,CAAAA,iBAfiB,CAiBtBF,cAjBsB,CAexBJ,KAfwB,CAgBfO,mBAhBe,CAiBtBH,cAjBsB,CAgBxBL,OAhBwB,IAoBxBS,CAAAA,OApBwB,CAuBtBJ,cAvBsB,CAoBxBI,OApBwB,CAqBjBC,YArBiB,CAuBtBL,cAvBsB,CAqBxBJ,KArBwB,CAsBfU,cAtBe,CAuBtBN,cAvBsB,CAsBxBL,OAtBwB,CAyB1B,GAAMY,CAAAA,aAAa,CAAG3C,WAAW,CAAC,SAAC4B,KAAD,QAAWA,CAAAA,KAAK,CAACgB,aAAjB,EAAD,CAAjC,CAzB0B,GA2BfC,CAAAA,mBA3Be,CA8BtBF,aA9BsB,CA2BxBG,OA3BwB,CA4BjBC,iBA5BiB,CA8BtBJ,aA9BsB,CA4BxBX,KA5BwB,CA6BfgB,mBA7Be,CA8BtBL,aA9BsB,CA6BxBZ,OA7BwB,CAgC1BlC,SAAS,CAAC,UAAM,CACd8B,QAAQ,CAACf,YAAY,CAACa,EAAD,CAAb,CAAR,CACA,GAAIwB,MAAM,CAACC,IAAP,CAAYpB,OAAZ,EAAqBqB,MAArB,GAAgC,CAApC,CAAuC,CACrCxB,QAAQ,CAAChB,kBAAkB,CAACc,EAAD,CAAnB,CAAR,CACD,CACF,CALQ,CAKN,CAACE,QAAD,CAAWF,EAAX,CAAeK,OAAf,CAAwBe,mBAAxB,CALM,CAAT,CAOA,GAAMO,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7B1B,OAAO,CAAC2B,IAAR,iBAAsB5B,EAAtB,iBAAgCN,GAAhC,GACAmC,UAAU,CAAC,UAAM,CACf5B,OAAO,CAAC2B,IAAR,CAAa,GAAb,EACD,CAFS,CAEP,IAFO,CAAV,CAGD,CALD,CAOA,GAAME,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,CAAD,CAAO,CACjCA,CAAC,CAACC,cAAF,GACA9B,QAAQ,CAACd,YAAY,CAAC,CAAE6C,UAAU,CAAEjC,EAAd,CAAkBJ,MAAM,CAANA,MAAlB,CAA0BE,OAAO,CAAPA,OAA1B,CAAD,CAAb,CAAR,CACAD,SAAS,CAAC,EAAD,CAAT,CACAE,UAAU,CAAC,EAAD,CAAV,CACAG,QAAQ,CAACb,iBAAiB,EAAlB,CAAR,CACD,CAND,CAQA,mBACE,qDACE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,eACE,oBAAC,MAAD,gBADF,CAC2B,GAD3B,CADF,CAIGiB,OAAO,cACN,oBAAC,MAAD,MADM,CAEJC,KAAK,cACP,oBAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,CAA0B,GAAG,CAAEA,KAA/B,EADO,cAGP,qDACE,oBAAC,IAAD,EAAM,KAAK,CAAEF,OAAO,CAAC6B,IAArB,EADF,cAEE,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,eACE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACE,oBAAC,KAAD,EAAO,GAAG,CAAE7B,OAAO,CAAC8B,KAApB,CAA2B,GAAG,CAAE9B,OAAO,CAAC6B,IAAxC,CAA8C,SAAS,KAAvD,EADF,CADF,cAIE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACE,oBAAC,SAAD,EAAW,OAAO,CAAC,OAAnB,eACE,oBAAC,SAAD,CAAW,IAAX,mBACE,8BAAK7B,OAAO,CAAC6B,IAAb,CADF,CADF,cAIE,oBAAC,SAAD,CAAW,IAAX,mBACE,oBAAC,MAAD,EACE,KAAK,CAAE7B,OAAO,CAACT,MADjB,CAEE,IAAI,WAAKS,OAAO,CAAC+B,WAAb,YAFN,EADF,CAJF,cAUE,oBAAC,SAAD,CAAW,IAAX,mBACE,uCAEG/B,OAAO,CAACgC,KAFX,CADF,CAVF,cAgBE,oBAAC,SAAD,CAAW,IAAX,sBACgBhC,OAAO,CAACiC,WADxB,CAhBF,CADF,CAJF,cA0BE,oBAAC,GAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,CAAW,IAAX,mBACE,oBAAC,GAAD,mBACE,oBAAC,GAAD,eADF,cAEE,oBAAC,GAAD,MAAMjC,OAAO,CAACgC,KAAd,CAFF,CADF,CADF,cAOE,oBAAC,SAAD,CAAW,IAAX,mBACE,oBAAC,GAAD,mBACE,oBAAC,GAAD,gBADF,cAEE,oBAAC,GAAD,MACGhC,OAAO,CAACkC,QAAR,CAAmB,CAAnB,0BADH,CAFF,CADF,CAPF,CAeGlC,OAAO,CAACkC,QAAR,CAAmB,CAAnB,eACC,oBAAC,SAAD,CAAW,IAAX,mBACE,oBAAC,GAAD,mBACE,oBAAC,GAAD,YADF,cAEE,oBAAC,GAAD,mBACE,oBAAC,IAAD,CAAM,OAAN,EACE,EAAE,CAAC,QADL,CAEE,KAAK,CAAE7C,GAFT,CAGE,QAAQ,CAAE,kBAACqC,CAAD,QAAOpC,CAAAA,MAAM,CAACoC,CAAC,CAACS,MAAF,CAASC,KAAV,CAAb,EAHZ,EAKG,mBAAIC,KAAK,CAACrC,OAAO,CAACkC,QAAT,CAAL,CAAwBd,IAAxB,EAAJ,EAAoCkB,GAApC,CAAwC,SAACC,KAAD,qBACvC,8BAAQ,GAAG,CAAEA,KAAK,CAAG,CAArB,EAAyBA,KAAK,CAAG,CAAjC,CADuC,EAAxC,CALH,CADF,CAFF,CADF,CAhBJ,cAiCE,oBAAC,SAAD,CAAW,IAAX,mBACE,oBAAC,MAAD,EACE,SAAS,CAAC,WADZ,CAEE,QAAQ,CAAEvC,OAAO,CAACkC,QAAR,GAAqB,CAFjC,CAGE,OAAO,CAAE,yBAAMZ,CAAAA,gBAAgB,CAAC3B,EAAD,CAAKN,GAAL,CAAtB,EAHX,gBADF,CAjCF,CADF,CA1BF,CAFF,cA0EE,oBAAC,GAAD,mBACE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACE,wCADF,CADF,CA1EF,cA+EE,oBAAC,GAAD,mBACE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,EACG6B,mBAAmB,eAAI,oBAAC,MAAD,MAD1B,cAEE,oBAAC,SAAD,EAAW,OAAO,CAAC,OAAnB,EACGR,OAAO,CAAC4B,GAAR,CAAY,SAACE,MAAD,qBACX,oBAAC,SAAD,CAAW,IAAX,mBACE,+BAAMA,MAAM,CAACC,QAAb,CADF,CAC+B,GAD/B,cAEE,oBAAC,MAAD,EAAQ,KAAK,CAAED,MAAM,CAACjD,MAAtB,CAA8B,UAAU,KAAxC,EAFF,cAGE,uCAAOvB,MAAM,CAACwE,MAAM,CAACE,UAAR,CAAN,CAA0BC,MAA1B,CACL,yBADK,CAAP,EAHF,cAME,+BAAMH,MAAM,CAAC/C,OAAb,CANF,CADW,EAAZ,CADH,CAWGiB,OAAO,CAACW,MAAR,GAAmB,CAAnB,eACC,oBAAC,OAAD,mBACE,8BAAKV,YAAL,CADF,CAZJ,cAgBE,wDAhBF,CAiBGR,IAAI,GAAK,IAAT,cACC,oBAAC,SAAD,CAAW,IAAX,MACGc,iBAAiB,eAChB,oBAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,EAA2BA,iBAA3B,CAFJ,CAIGF,mBAAmB,eAClB,oBAAC,OAAD,EAAS,OAAO,CAAC,SAAjB,8BALJ,cAUE,oBAAC,IAAD,CAAM,KAAN,mBACE,oBAAC,IAAD,CAAM,KAAN,eADF,cAEE,oBAAC,IAAD,CAAM,OAAN,EACE,EAAE,CAAC,QADL,CAEE,KAAK,CAAExB,MAFT,CAGE,QAAQ,CAAE,kBAACmC,CAAD,QAAOlC,CAAAA,SAAS,CAACoD,MAAM,CAAClB,CAAC,CAACS,MAAF,CAASC,KAAV,CAAP,CAAhB,EAHZ,eAKE,8BAAQ,KAAK,CAAE,CAAf,aALF,cAME,8BAAQ,KAAK,CAAE,CAAf,aANF,cAOE,8BAAQ,KAAK,CAAE,CAAf,aAPF,cAQE,8BAAQ,KAAK,CAAE,CAAf,kBARF,cASE,8BAAQ,KAAK,CAAE,CAAf,kBATF,CAFF,CAVF,cAwBE,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,SAAtB,eACE,oBAAC,IAAD,CAAM,KAAN,gBADF,cAEE,oBAAC,IAAD,CAAM,OAAN,EACE,EAAE,CAAC,UADL,CAEE,IAAI,CAAE,CAFR,CAGE,KAAK,CAAE3C,OAHT,CAIE,QAAQ,CAAE,kBAACiC,CAAD,QAAOhC,CAAAA,UAAU,CAACgC,CAAC,CAACS,MAAF,CAASC,KAAV,CAAjB,EAJZ,CAKE,QAAQ,CAAC,UALX,EAFF,CAxBF,cAkCE,oBAAC,MAAD,EAAQ,OAAO,CAAEX,mBAAjB,WAlCF,CADD,cAsCC,oBAAC,OAAD,6BACS,oBAAC,IAAD,EAAM,EAAE,CAAC,QAAT,YADT,sBAvDJ,CAFF,CADF,CA/EF,CATJ,CADF,CA8JD,CApND,CAqNA,cAAerC,CAAAA,aAAf","sourcesContent":["/* eslint-disable no-nested-ternary */\r\nimport React, { useState, useEffect } from 'react';\r\nimport Moment from 'moment';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useParams, useHistory } from 'react-router-dom';\r\nimport { Button, Row, Col, Image, ListGroup, Form } from 'react-bootstrap';\r\nimport Rating from '../Rating';\r\nimport { listProductDetails } from '../../actions/productActions';\r\nimport {\r\n  fetchReviews,\r\n  createReview,\r\n  resetCreateReview,\r\n} from '../../actions/reviewActions';\r\nimport Loader from '../Loader';\r\nimport Message from '../Message';\r\nimport Meta from '../Meta';\r\n\r\nconst ProductScreen = () => {\r\n  const [qty, setQty] = useState(1);\r\n  const [rating, setRating] = useState(1);\r\n  const [comment, setComment] = useState('');\r\n  const { id } = useParams();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const { product, loading, error } = useSelector(\r\n    (state) => state.productDetails\r\n  );\r\n\r\n  const user = useSelector((state) => state.userLogin.userInfo);\r\n\r\n  const productReviews = useSelector((state) => state.reviewsFetch);\r\n  const {\r\n    error: errorReviewsFetch,\r\n    loading: loadingReviewsFetch,\r\n  } = productReviews;\r\n\r\n  const {\r\n    reviews,\r\n    error: errorReviews,\r\n    loading: loadingReviews,\r\n  } = productReviews;\r\n\r\n  const createdReview = useSelector((state) => state.reviewsCreate);\r\n  const {\r\n    success: createReviewSuccess,\r\n    error: createReviewError,\r\n    loading: createReviewLoading,\r\n  } = createdReview;\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchReviews(id));\r\n    if (Object.keys(product).length === 0) {\r\n      dispatch(listProductDetails(id));\r\n    }\r\n  }, [dispatch, id, product, createReviewSuccess]);\r\n\r\n  const addToCarThandler = () => {\r\n    history.push(`/cart/${id}?qty=${qty}`);\r\n    setTimeout(() => {\r\n      history.push('/');\r\n    }, 1000);\r\n  };\r\n\r\n  const reviewSubmitHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(createReview({ product_id: id, rating, comment }));\r\n    setRating('');\r\n    setComment('');\r\n    dispatch(resetCreateReview());\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Link to=\"/\">\r\n        <Button>Go Back</Button>{' '}\r\n      </Link>\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant=\"danger\" msg={error} />\r\n      ) : (\r\n        <>\r\n          <Meta title={product.name} />\r\n          <Row className=\"mt-5\">\r\n            <Col md={6}>\r\n              <Image src={product.image} alt={product.name} thumbnail />\r\n            </Col>\r\n            <Col md={3}>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h2>{product.name}</h2>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <Rating\r\n                    value={product.rating}\r\n                    text={`${product.num_reviews} Reviews`}\r\n                  />\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <h5>\r\n                    Price:\r\n                    {product.price}\r\n                  </h5>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  Description: {product.description}\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Col>\r\n            <Col>\r\n              <ListGroup>\r\n                <ListGroup.Item>\r\n                  <Row>\r\n                    <Col>Price:</Col>\r\n                    <Col>{product.price}</Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <Row>\r\n                    <Col>Status:</Col>\r\n                    <Col>\r\n                      {product.in_stock > 0 ? `In Stock` : `Out of Stock`}\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n                {product.in_stock > 0 && (\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>Qty</Col>\r\n                      <Col>\r\n                        <Form.Control\r\n                          as=\"select\"\r\n                          value={qty}\r\n                          onChange={(e) => setQty(e.target.value)}\r\n                        >\r\n                          {[...Array(product.in_stock).keys()].map((index) => (\r\n                            <option key={index + 1}>{index + 1}</option>\r\n                          ))}\r\n                        </Form.Control>\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                )}\r\n                <ListGroup.Item>\r\n                  <Button\r\n                    className=\"btn-block\"\r\n                    disabled={product.in_stock === 0}\r\n                    onClick={() => addToCarThandler(id, qty)}\r\n                  >\r\n                    Add to Cart\r\n                  </Button>\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col md={6}>\r\n              <h2>Reviews</h2>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col md={6}>\r\n              {createReviewLoading && <Loader />}\r\n              <ListGroup variant=\"flush\">\r\n                {reviews.map((review) => (\r\n                  <ListGroup.Item>\r\n                    <pre>{review.username}</pre>{' '}\r\n                    <Rating value={review.rating} forReviews />\r\n                    <p>{`${Moment(review.created_at).format(\r\n                      'MMMM Do YYYY, h:mm:ss a'\r\n                    )}`}</p>\r\n                    <pre>{review.comment}</pre>\r\n                  </ListGroup.Item>\r\n                ))}\r\n                {reviews.length === 0 && (\r\n                  <Message>\r\n                    <h5>{errorReviews}</h5>\r\n                  </Message>\r\n                )}\r\n                <h2>WRITE A CUSTOMER REVIEW</h2>\r\n                {user !== null ? (\r\n                  <ListGroup.Item>\r\n                    {createReviewError && (\r\n                      <Message variant=\"danger\">{createReviewError}</Message>\r\n                    )}\r\n                    {createReviewSuccess && (\r\n                      <Message variant=\"success\">\r\n                        Successfully Added Review\r\n                      </Message>\r\n                    )}\r\n\r\n                    <Form.Group>\r\n                      <Form.Label>Rating</Form.Label>\r\n                      <Form.Control\r\n                        as=\"select\"\r\n                        value={rating}\r\n                        onChange={(e) => setRating(Number(e.target.value))}\r\n                      >\r\n                        <option value={1}>1 - Poor</option>\r\n                        <option value={2}>2 - Fair</option>\r\n                        <option value={3}>3 - Good</option>\r\n                        <option value={4}>4 - Very Good</option>\r\n                        <option value={5}>5 - Excellent</option>\r\n                      </Form.Control>\r\n                    </Form.Group>\r\n                    <Form.Group controlId=\"comment\">\r\n                      <Form.Label>Comment</Form.Label>\r\n                      <Form.Control\r\n                        as=\"textarea\"\r\n                        rows={3}\r\n                        value={comment}\r\n                        onChange={(e) => setComment(e.target.value)}\r\n                        required=\"required\"\r\n                      />\r\n                    </Form.Group>\r\n                    <Button onClick={reviewSubmitHandler}>Submit</Button>\r\n                  </ListGroup.Item>\r\n                ) : (\r\n                  <Message>\r\n                    Please <Link to=\"/login\">sign in</Link> to write a review\r\n                  </Message>\r\n                )}\r\n              </ListGroup>\r\n            </Col>\r\n          </Row>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default ProductScreen;\r\n"]},"metadata":{},"sourceType":"module"}