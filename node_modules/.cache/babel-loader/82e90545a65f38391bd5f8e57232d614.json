{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Development\\\\A-portfolio-projects\\\\e-commerce-practice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Development\\\\A-portfolio-projects\\\\e-commerce-practice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";/* eslint-disable camelcase */import Axios from'axios';import{reviewConstants}from'../constants/reviewConstants';var PRODUCT_FETCH_REVIEWS_REQUEST=reviewConstants.PRODUCT_FETCH_REVIEWS_REQUEST,PRODUCT_FETCH_REVIEWS_SUCCESS=reviewConstants.PRODUCT_FETCH_REVIEWS_SUCCESS,PRODUCT_FETCH_REVIEWS_FAIL=reviewConstants.PRODUCT_FETCH_REVIEWS_FAIL,PRODUCT_FETCH_REVIEWS_RESET=reviewConstants.PRODUCT_FETCH_REVIEWS_RESET,PRODUCT_CREATE_REVIEWS_REQUEST=reviewConstants.PRODUCT_CREATE_REVIEWS_REQUEST,PRODUCT_CREATE_REVIEWS_SUCCESS=reviewConstants.PRODUCT_CREATE_REVIEWS_SUCCESS,PRODUCT_CREATE_REVIEWS_FAIL=reviewConstants.PRODUCT_CREATE_REVIEWS_FAIL,PRODUCT_CREATE_REVIEWS_RESET=reviewConstants.PRODUCT_CREATE_REVIEWS_RESET;export var fetchReviews=function fetchReviews(product_id){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _yield$Axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:PRODUCT_FETCH_REVIEWS_REQUEST});_context.next=4;return Axios.get(\"https://raboy-eshop.herokuapp.com/api/v1/reviews/\".concat(product_id));case 4:_yield$Axios$get=_context.sent;data=_yield$Axios$get.data;dispatch({type:PRODUCT_FETCH_REVIEWS_SUCCESS,payload:data.reviews});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);dispatch({type:PRODUCT_FETCH_REVIEWS_FAIL,payload:_context.t0.response&&_context.t0.response.data.error.message?_context.t0.response.data.error.message:_context.t0.message});case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var resetReviews=function resetReviews(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:PRODUCT_FETCH_REVIEWS_RESET});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref2.apply(this,arguments);};}();};export var createReview=function createReview(ratingObj){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var product_id,rating,comment,token,config;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:product_id=ratingObj.product_id,rating=ratingObj.rating,comment=ratingObj.comment;token=getState().userLogin.userInfo.token;config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)}};_context3.prev=3;dispatch({type:PRODUCT_CREATE_REVIEWS_REQUEST});_context3.next=7;return Axios.post(\"https://raboy-eshop.herokuapp.com/api/v1/reviews/\".concat(product_id),{product_id:product_id,rating:rating,comment:comment},config);case 7:dispatch({type:PRODUCT_CREATE_REVIEWS_SUCCESS});_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](3);dispatch({type:PRODUCT_CREATE_REVIEWS_FAIL,payload:_context3.t0.response&&_context3.t0.response.data.error.message?_context3.t0.response.data.error.message:_context3.t0.message});case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[3,10]]);}));return function(_x4,_x5){return _ref3.apply(this,arguments);};}();};export var resetCreateReview=function resetCreateReview(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:PRODUCT_CREATE_REVIEWS_RESET});case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x6){return _ref4.apply(this,arguments);};}();};","map":{"version":3,"sources":["D:/Development/A-portfolio-projects/e-commerce-practice/frontend/src/actions/reviewActions.js"],"names":["Axios","reviewConstants","PRODUCT_FETCH_REVIEWS_REQUEST","PRODUCT_FETCH_REVIEWS_SUCCESS","PRODUCT_FETCH_REVIEWS_FAIL","PRODUCT_FETCH_REVIEWS_RESET","PRODUCT_CREATE_REVIEWS_REQUEST","PRODUCT_CREATE_REVIEWS_SUCCESS","PRODUCT_CREATE_REVIEWS_FAIL","PRODUCT_CREATE_REVIEWS_RESET","fetchReviews","product_id","dispatch","getState","type","get","data","payload","reviews","response","error","message","resetReviews","createReview","ratingObj","rating","comment","token","userLogin","userInfo","config","headers","Authorization","post","resetCreateReview"],"mappings":"6XAAA,8BACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,eAAT,KAAgC,8BAAhC,C,GAGEC,CAAAA,6B,CAQED,e,CARFC,6B,CACAC,6B,CAOEF,e,CAPFE,6B,CACAC,0B,CAMEH,e,CANFG,0B,CACAC,2B,CAKEJ,e,CALFI,2B,CACAC,8B,CAIEL,e,CAJFK,8B,CACAC,8B,CAGEN,e,CAHFM,8B,CACAC,2B,CAEEP,e,CAFFO,2B,CACAC,4B,CACER,e,CADFQ,4B,CAGF,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,UAAD,iGAAgB,iBAAOC,QAAP,CAAiBC,QAAjB,4JAExCD,QAAQ,CAAC,CAAEE,IAAI,CAAEZ,6BAAR,CAAD,CAAR,CAFwC,sBAIjBF,CAAAA,KAAK,CAACe,GAAN,4DAC+BJ,UAD/B,EAJiB,uCAIhCK,IAJgC,kBAIhCA,IAJgC,CAOxCJ,QAAQ,CAAC,CAAEE,IAAI,CAAEX,6BAAR,CAAuCc,OAAO,CAAED,IAAI,CAACE,OAArD,CAAD,CAAR,CAPwC,+EASxCN,QAAQ,CAAC,CACPE,IAAI,CAAEV,0BADC,CAEPa,OAAO,CACL,YAAME,QAAN,EAAkB,YAAMA,QAAN,CAAeH,IAAf,CAAoBI,KAApB,CAA0BC,OAA5C,CACI,YAAMF,QAAN,CAAeH,IAAf,CAAoBI,KAApB,CAA0BC,OAD9B,CAEI,YAAMA,OALL,CAAD,CAAR,CATwC,oEAAhB,oEAArB,CAmBP,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,mGAAM,kBAAOV,QAAP,sHAChCA,QAAQ,CAAC,CAAEE,IAAI,CAAET,2BAAR,CAAD,CAAR,CADgC,wDAAN,kEAArB,CAIP,MAAO,IAAMkB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,SAAD,kGAAe,kBAAOZ,QAAP,CAAiBC,QAAjB,iKACjCF,UADiC,CACDa,SADC,CACjCb,UADiC,CACrBc,MADqB,CACDD,SADC,CACrBC,MADqB,CACbC,OADa,CACDF,SADC,CACbE,OADa,CAEjCC,KAFiC,CAEvBd,QAAQ,GAAGe,SAAX,CAAqBC,QAFE,CAEjCF,KAFiC,CAGnCG,MAHmC,CAG1B,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,kBAAYL,KAAZ,CAFN,CADI,CAH0B,kBAWvCf,QAAQ,CAAC,CAAEE,IAAI,CAAER,8BAAR,CAAD,CAAR,CAXuC,uBAajCN,CAAAA,KAAK,CAACiC,IAAN,4DACgDtB,UADhD,EAEJ,CACEA,UAAU,CAAVA,UADF,CAEEc,MAAM,CAANA,MAFF,CAGEC,OAAO,CAAPA,OAHF,CAFI,CAOJI,MAPI,CAbiC,QAsBvClB,QAAQ,CAAC,CAAEE,IAAI,CAAEP,8BAAR,CAAD,CAAR,CAtBuC,qFAwBvCK,QAAQ,CAAC,CACPE,IAAI,CAAEN,2BADC,CAEPS,OAAO,CACL,aAAME,QAAN,EAAkB,aAAMA,QAAN,CAAeH,IAAf,CAAoBI,KAApB,CAA0BC,OAA5C,CACI,aAAMF,QAAN,CAAeH,IAAf,CAAoBI,KAApB,CAA0BC,OAD9B,CAEI,aAAMA,OALL,CAAD,CAAR,CAxBuC,uEAAf,sEAArB,CAkCP,MAAO,IAAMa,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,mGAAM,kBAAOtB,QAAP,sHACrCA,QAAQ,CAAC,CAAEE,IAAI,CAAEL,4BAAR,CAAD,CAAR,CADqC,wDAAN,kEAA1B","sourcesContent":["/* eslint-disable camelcase */\r\nimport Axios from 'axios';\r\nimport { reviewConstants } from '../constants/reviewConstants';\r\n\r\nconst {\r\n  PRODUCT_FETCH_REVIEWS_REQUEST,\r\n  PRODUCT_FETCH_REVIEWS_SUCCESS,\r\n  PRODUCT_FETCH_REVIEWS_FAIL,\r\n  PRODUCT_FETCH_REVIEWS_RESET,\r\n  PRODUCT_CREATE_REVIEWS_REQUEST,\r\n  PRODUCT_CREATE_REVIEWS_SUCCESS,\r\n  PRODUCT_CREATE_REVIEWS_FAIL,\r\n  PRODUCT_CREATE_REVIEWS_RESET,\r\n} = reviewConstants;\r\n\r\nexport const fetchReviews = (product_id) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: PRODUCT_FETCH_REVIEWS_REQUEST });\r\n\r\n    const { data } = await Axios.get(\r\n      `https://raboy-eshop.herokuapp.com/api/v1/reviews/${product_id}`\r\n    );\r\n    dispatch({ type: PRODUCT_FETCH_REVIEWS_SUCCESS, payload: data.reviews });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: PRODUCT_FETCH_REVIEWS_FAIL,\r\n      payload:\r\n        error.response && error.response.data.error.message\r\n          ? error.response.data.error.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const resetReviews = () => async (dispatch) => {\r\n  dispatch({ type: PRODUCT_FETCH_REVIEWS_RESET });\r\n};\r\n\r\nexport const createReview = (ratingObj) => async (dispatch, getState) => {\r\n  const { product_id, rating, comment } = ratingObj;\r\n  const { token } = getState().userLogin.userInfo;\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  try {\r\n    dispatch({ type: PRODUCT_CREATE_REVIEWS_REQUEST });\r\n\r\n    await Axios.post(\r\n      `https://raboy-eshop.herokuapp.com/api/v1/reviews/${product_id}`,\r\n      {\r\n        product_id,\r\n        rating,\r\n        comment,\r\n      },\r\n      config\r\n    );\r\n    dispatch({ type: PRODUCT_CREATE_REVIEWS_SUCCESS });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: PRODUCT_CREATE_REVIEWS_FAIL,\r\n      payload:\r\n        error.response && error.response.data.error.message\r\n          ? error.response.data.error.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const resetCreateReview = () => async (dispatch) => {\r\n  dispatch({ type: PRODUCT_CREATE_REVIEWS_RESET });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}