{"ast":null,"code":"/* eslint-disable camelcase */import React,{useEffect,useState}from'react';import Moment from'moment';import{LinkContainer}from'react-router-bootstrap';import{Table,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{FcCheckmark,FcHighPriority}from'react-icons/fc';import{fetchDistinctOrderId,fetchOneOrder,resetAllOrderList,getAllOrderedItemsByOrderId}from'../../actions/orderActions';import{getUserDetails}from'../../actions/userActions';import Message from'../Message';import Loader from'../Loader';var OrderListScreen=function OrderListScreen(){var dispatch=useDispatch();// Global state\nvar _useSelector=useSelector(function(state){return state.orderFetchDistinct;}),distinctIds=_useSelector.distinctIds;var _useSelector2=useSelector(function(state){return state.orderFetchOne;}),allOrderList=_useSelector2.allOrderList,loading=_useSelector2.loading,error=_useSelector2.error,success=_useSelector2.success;var _useSelector3=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector3.userInfo;var user_id=userInfo.user_id;useEffect(function(){dispatch(fetchDistinctOrderId());dispatch(getUserDetails('profile'));},[dispatch,user_id]);useEffect(function(){if(success){dispatch(resetAllOrderList());}if(distinctIds.length!==0){distinctIds.forEach(function(idObj){dispatch(fetchOneOrder(idObj.order_id));});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[dispatch,distinctIds]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Orders\"),loading&&/*#__PURE__*/React.createElement(Loader,null),error&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error),allOrderList?/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,responsive:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"USER\"),/*#__PURE__*/React.createElement(\"th\",null,\"DATE\"),/*#__PURE__*/React.createElement(\"th\",null,\"TOTAL\"),/*#__PURE__*/React.createElement(\"th\",null,\"PAID\"),/*#__PURE__*/React.createElement(\"th\",null,\"DELIVERED\"),/*#__PURE__*/React.createElement(\"th\",{colSpan:\"2\",className:\"text-center\"},\"ACTIONS\"))),/*#__PURE__*/React.createElement(\"tbody\",null,allOrderList.map(function(orderItem){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,orderItem.order_id),/*#__PURE__*/React.createElement(\"td\",null,orderItem.name),/*#__PURE__*/React.createElement(\"td\",null,\"\".concat(Moment(orderItem.created_at).format('MMMM Do YYYY, h:mm:ss A'),\" - (\").concat(Moment().startOf('hour').fromNow(),\")\")),/*#__PURE__*/React.createElement(\"td\",null,orderItem.subtotal),/*#__PURE__*/React.createElement(\"td\",null,orderItem.is_paid?/*#__PURE__*/React.createElement(FcCheckmark,{size:\"2em\"}):/*#__PURE__*/React.createElement(FcHighPriority,{size:\"2em\"})),/*#__PURE__*/React.createElement(\"td\",null,orderItem.is_delivered?/*#__PURE__*/React.createElement(FcCheckmark,{size:\"2em\"}):/*#__PURE__*/React.createElement(FcHighPriority,{size:\"2em\"})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/order/\".concat(orderItem.order_id)},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){dispatch(getAllOrderedItemsByOrderId(orderItem.order_id));}},\"Details\"))));}))):/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},\"'No Orders Found!'\"));};export default OrderListScreen;","map":{"version":3,"sources":["D:/Development/A-portfolio-projects/e-commerce-practice/frontend/src/components/screens/OrderListScreen.jsx"],"names":["React","useEffect","useState","Moment","LinkContainer","Table","Button","useDispatch","useSelector","FcCheckmark","FcHighPriority","fetchDistinctOrderId","fetchOneOrder","resetAllOrderList","getAllOrderedItemsByOrderId","getUserDetails","Message","Loader","OrderListScreen","dispatch","state","orderFetchDistinct","distinctIds","orderFetchOne","allOrderList","loading","error","success","userLogin","userInfo","user_id","length","forEach","idObj","order_id","map","orderItem","name","created_at","format","startOf","fromNow","subtotal","is_paid","is_delivered"],"mappings":"AAAA,8BACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,aAAT,KAA8B,wBAA9B,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,iBAA9B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,WAAT,CAAsBC,cAAtB,KAA4C,gBAA5C,CAEA,OACEC,oBADF,CAEEC,aAFF,CAGEC,iBAHF,CAIEC,2BAJF,KAKO,4BALP,CAOA,OAASC,cAAT,KAA+B,2BAA/B,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CAEA;AAH4B,iBAIJC,WAAW,CAAC,SAACY,KAAD,QAAWA,CAAAA,KAAK,CAACC,kBAAjB,EAAD,CAJP,CAIpBC,WAJoB,cAIpBA,WAJoB,mBAKsBd,WAAW,CAC3D,SAACY,KAAD,QAAWA,CAAAA,KAAK,CAACG,aAAjB,EAD2D,CALjC,CAKpBC,YALoB,eAKpBA,YALoB,CAKNC,OALM,eAKNA,OALM,CAKGC,KALH,eAKGA,KALH,CAKUC,OALV,eAKUA,OALV,mBAQPnB,WAAW,CAAC,SAACY,KAAD,QAAWA,CAAAA,KAAK,CAACQ,SAAjB,EAAD,CARJ,CAQpBC,QARoB,eAQpBA,QARoB,IASpBC,CAAAA,OAToB,CASRD,QATQ,CASpBC,OAToB,CAW5B7B,SAAS,CAAC,UAAM,CACdkB,QAAQ,CAACR,oBAAoB,EAArB,CAAR,CACAQ,QAAQ,CAACJ,cAAc,CAAC,SAAD,CAAf,CAAR,CACD,CAHQ,CAGN,CAACI,QAAD,CAAWW,OAAX,CAHM,CAAT,CAKA7B,SAAS,CAAC,UAAM,CACd,GAAI0B,OAAJ,CAAa,CACXR,QAAQ,CAACN,iBAAiB,EAAlB,CAAR,CACD,CAED,GAAIS,WAAW,CAACS,MAAZ,GAAuB,CAA3B,CAA8B,CAC5BT,WAAW,CAACU,OAAZ,CAAoB,SAACC,KAAD,CAAW,CAC7Bd,QAAQ,CAACP,aAAa,CAACqB,KAAK,CAACC,QAAP,CAAd,CAAR,CACD,CAFD,EAGD,CACD;AACD,CAXQ,CAWN,CAACf,QAAD,CAAWG,WAAX,CAXM,CAAT,CAaA,mBACE,4CACE,uCADF,CAEGG,OAAO,eAAI,oBAAC,MAAD,MAFd,CAGGC,KAAK,eAAI,oBAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,EAA2BA,KAA3B,CAHZ,CAIGF,YAAY,cACX,oBAAC,KAAD,EAAO,OAAO,KAAd,CAAe,QAAQ,KAAvB,CAAwB,KAAK,KAA7B,CAA8B,UAAU,KAAxC,eACE,8CACE,2CACE,mCADF,cAEE,qCAFF,cAGE,qCAHF,cAIE,sCAJF,cAKE,qCALF,cAME,0CANF,cAOE,0BAAI,OAAO,CAAC,GAAZ,CAAgB,SAAS,CAAC,aAA1B,YAPF,CADF,CADF,cAcE,iCACGA,YAAY,CAACW,GAAb,CAAiB,SAACC,SAAD,qBAChB,2CACE,8BAAKA,SAAS,CAACF,QAAf,CADF,cAEE,8BAAKE,SAAS,CAACC,IAAf,CAFF,cAGE,wCACMlC,MAAM,CAACiC,SAAS,CAACE,UAAX,CAAN,CAA6BC,MAA7B,CACF,yBADE,CADN,gBAGUpC,MAAM,GAAGqC,OAAT,CAAiB,MAAjB,EAAyBC,OAAzB,EAHV,MAHF,cAQE,8BAAKL,SAAS,CAACM,QAAf,CARF,cASE,8BACGN,SAAS,CAACO,OAAV,cACC,oBAAC,WAAD,EAAa,IAAI,CAAC,KAAlB,EADD,cAGC,oBAAC,cAAD,EAAgB,IAAI,CAAC,KAArB,EAJJ,CATF,cAgBE,8BACGP,SAAS,CAACQ,YAAV,cACC,oBAAC,WAAD,EAAa,IAAI,CAAC,KAAlB,EADD,cAGC,oBAAC,cAAD,EAAgB,IAAI,CAAC,KAArB,EAJJ,CAhBF,cAuBE,2CACE,oBAAC,aAAD,EAAe,EAAE,kBAAYR,SAAS,CAACF,QAAtB,CAAjB,eACE,oBAAC,MAAD,EACE,OAAO,CAAE,kBAAM,CACbf,QAAQ,CACNL,2BAA2B,CAACsB,SAAS,CAACF,QAAX,CADrB,CAAR,CAGD,CALH,YADF,CADF,CAvBF,CADgB,EAAjB,CADH,CAdF,CADW,cA0DX,oBAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,uBA9DJ,CADF,CAmED,CAhGD,CAiGA,cAAehB,CAAAA,eAAf","sourcesContent":["/* eslint-disable camelcase */\r\nimport React, { useEffect, useState } from 'react';\r\nimport Moment from 'moment';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport { Table, Button } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { FcCheckmark, FcHighPriority } from 'react-icons/fc';\r\n\r\nimport {\r\n  fetchDistinctOrderId,\r\n  fetchOneOrder,\r\n  resetAllOrderList,\r\n  getAllOrderedItemsByOrderId,\r\n} from '../../actions/orderActions';\r\n\r\nimport { getUserDetails } from '../../actions/userActions';\r\nimport Message from '../Message';\r\nimport Loader from '../Loader';\r\n\r\nconst OrderListScreen = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  // Global state\r\n  const { distinctIds } = useSelector((state) => state.orderFetchDistinct);\r\n  const { allOrderList, loading, error, success } = useSelector(\r\n    (state) => state.orderFetchOne\r\n  );\r\n  const { userInfo } = useSelector((state) => state.userLogin);\r\n  const { user_id } = userInfo;\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchDistinctOrderId());\r\n    dispatch(getUserDetails('profile'));\r\n  }, [dispatch, user_id]);\r\n\r\n  useEffect(() => {\r\n    if (success) {\r\n      dispatch(resetAllOrderList());\r\n    }\r\n\r\n    if (distinctIds.length !== 0) {\r\n      distinctIds.forEach((idObj) => {\r\n        dispatch(fetchOneOrder(idObj.order_id));\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, distinctIds]);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Orders</h1>\r\n      {loading && <Loader />}\r\n      {error && <Message variant=\"danger\">{error}</Message>}\r\n      {allOrderList ? (\r\n        <Table striped bordered hover responsive>\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>USER</th>\r\n              <th>DATE</th>\r\n              <th>TOTAL</th>\r\n              <th>PAID</th>\r\n              <th>DELIVERED</th>\r\n              <th colSpan=\"2\" className=\"text-center\">\r\n                ACTIONS\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {allOrderList.map((orderItem) => (\r\n              <tr>\r\n                <td>{orderItem.order_id}</td>\r\n                <td>{orderItem.name}</td>\r\n                <td>\r\n                  {`${Moment(orderItem.created_at).format(\r\n                    'MMMM Do YYYY, h:mm:ss A'\r\n                  )} - (${Moment().startOf('hour').fromNow()})`}\r\n                </td>\r\n                <td>{orderItem.subtotal}</td>\r\n                <td>\r\n                  {orderItem.is_paid ? (\r\n                    <FcCheckmark size=\"2em\" />\r\n                  ) : (\r\n                    <FcHighPriority size=\"2em\" />\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {orderItem.is_delivered ? (\r\n                    <FcCheckmark size=\"2em\" />\r\n                  ) : (\r\n                    <FcHighPriority size=\"2em\" />\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  <LinkContainer to={`/order/${orderItem.order_id}`}>\r\n                    <Button\r\n                      onClick={() => {\r\n                        dispatch(\r\n                          getAllOrderedItemsByOrderId(orderItem.order_id)\r\n                        );\r\n                      }}\r\n                    >\r\n                      Details\r\n                    </Button>\r\n                  </LinkContainer>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n      ) : (\r\n        <Message variant=\"danger\">'No Orders Found!'</Message>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default OrderListScreen;\r\n"]},"metadata":{},"sourceType":"module"}