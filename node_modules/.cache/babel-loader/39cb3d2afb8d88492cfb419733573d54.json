{"ast":null,"code":"/* eslint-disable camelcase */\nimport Axios from 'axios';\nimport { reviewConstants } from '../constants/reviewConstants';\nconst {\n  PRODUCT_FETCH_REVIEWS_REQUEST,\n  PRODUCT_FETCH_REVIEWS_SUCCESS,\n  PRODUCT_FETCH_REVIEWS_FAIL,\n  PRODUCT_FETCH_REVIEWS_RESET,\n  PRODUCT_CREATE_REVIEWS_REQUEST,\n  PRODUCT_CREATE_REVIEWS_SUCCESS,\n  PRODUCT_CREATE_REVIEWS_FAIL,\n  PRODUCT_CREATE_REVIEWS_RESET\n} = reviewConstants;\nexport const fetchReviews = product_id => async (dispatch, getState) => {\n  const {\n    token\n  } = getState().userLogin.userInfo;\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`\n    }\n  };\n\n  try {\n    dispatch({\n      type: PRODUCT_FETCH_REVIEWS_REQUEST\n    });\n    const {\n      data\n    } = await Axios.get(`http://localhost:5000/api/v1/reviews/${product_id}`, config);\n    dispatch({\n      type: PRODUCT_FETCH_REVIEWS_SUCCESS,\n      payload: data.reviews\n    });\n  } catch (error) {\n    dispatch({\n      type: PRODUCT_FETCH_REVIEWS_FAIL,\n      payload: error.response && error.response.data.error.message ? error.response.data.error.message : error.message\n    });\n  }\n};\nexport const resetReviews = () => async dispatch => {\n  dispatch({\n    type: PRODUCT_FETCH_REVIEWS_RESET\n  });\n};\nexport const createReview = ratingObj => async (dispatch, getState) => {\n  const {\n    product_id,\n    rating,\n    comment\n  } = rating;\n  const {\n    token\n  } = getState().userLogin.userInfo;\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`\n    }\n  };\n\n  try {\n    dispatch({\n      type: PRODUCT_CREATE_REVIEWS_REQUEST\n    });\n    await Axios.post(`http://localhost:5000/api/v1/reviews/${product_id}`, {\n      product_id,\n      rating,\n      comment\n    }, config);\n    dispatch({\n      type: PRODUCT_CREATE_REVIEWS_SUCCESS\n    });\n  } catch (error) {\n    dispatch({\n      type: PRODUCT_CREATE_REVIEWS_FAIL,\n      payload: error.response && error.response.data.error.message ? error.response.data.error.message : error.message\n    });\n  }\n};","map":{"version":3,"sources":["D:/Development/portfolio-projects/e-commerce-practice/frontend/src/actions/reviewActions.js"],"names":["Axios","reviewConstants","PRODUCT_FETCH_REVIEWS_REQUEST","PRODUCT_FETCH_REVIEWS_SUCCESS","PRODUCT_FETCH_REVIEWS_FAIL","PRODUCT_FETCH_REVIEWS_RESET","PRODUCT_CREATE_REVIEWS_REQUEST","PRODUCT_CREATE_REVIEWS_SUCCESS","PRODUCT_CREATE_REVIEWS_FAIL","PRODUCT_CREATE_REVIEWS_RESET","fetchReviews","product_id","dispatch","getState","token","userLogin","userInfo","config","headers","Authorization","type","data","get","payload","reviews","error","response","message","resetReviews","createReview","ratingObj","rating","comment","post"],"mappings":"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","sourcesContent":["/* eslint-disable camelcase */\r\nimport Axios from 'axios';\r\nimport { reviewConstants } from '../constants/reviewConstants';\r\n\r\nconst {\r\n  PRODUCT_FETCH_REVIEWS_REQUEST,\r\n  PRODUCT_FETCH_REVIEWS_SUCCESS,\r\n  PRODUCT_FETCH_REVIEWS_FAIL,\r\n  PRODUCT_FETCH_REVIEWS_RESET,\r\n  PRODUCT_CREATE_REVIEWS_REQUEST,\r\n  PRODUCT_CREATE_REVIEWS_SUCCESS,\r\n  PRODUCT_CREATE_REVIEWS_FAIL,\r\n  PRODUCT_CREATE_REVIEWS_RESET,\r\n} = reviewConstants;\r\n\r\nexport const fetchReviews = (product_id) => async (dispatch, getState) => {\r\n  const { token } = getState().userLogin.userInfo;\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  try {\r\n    dispatch({ type: PRODUCT_FETCH_REVIEWS_REQUEST });\r\n\r\n    const { data } = await Axios.get(\r\n      `http://localhost:5000/api/v1/reviews/${product_id}`,\r\n      config\r\n    );\r\n    dispatch({ type: PRODUCT_FETCH_REVIEWS_SUCCESS, payload: data.reviews });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: PRODUCT_FETCH_REVIEWS_FAIL,\r\n      payload:\r\n        error.response && error.response.data.error.message\r\n          ? error.response.data.error.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const resetReviews = () => async (dispatch) => {\r\n  dispatch({ type: PRODUCT_FETCH_REVIEWS_RESET });\r\n};\r\n\r\nexport const createReview = (ratingObj) => async (dispatch, getState) => {\r\n  const { product_id, rating, comment } = rating;\r\n  const { token } = getState().userLogin.userInfo;\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  try {\r\n    dispatch({ type: PRODUCT_CREATE_REVIEWS_REQUEST });\r\n\r\n    await Axios.post(\r\n      `http://localhost:5000/api/v1/reviews/${product_id}`,\r\n      {\r\n        product_id,\r\n        rating,\r\n        comment,\r\n      },\r\n      config\r\n    );\r\n    dispatch({ type: PRODUCT_CREATE_REVIEWS_SUCCESS });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: PRODUCT_CREATE_REVIEWS_FAIL,\r\n      payload:\r\n        error.response && error.response.data.error.message\r\n          ? error.response.data.error.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}